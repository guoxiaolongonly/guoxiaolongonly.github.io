<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Xiaolong, lucky" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="程序猿">
<meta property="og:type" content="website">
<meta property="og:title" content="Xiaolong的个人博客">
<meta property="og:url" content="http://rngift.com/index.html">
<meta property="og:site_name" content="Xiaolong的个人博客">
<meta property="og:description" content="程序猿">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Xiaolong的个人博客">
<meta name="twitter:description" content="程序猿">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://rngift.com/"/>





  <title>Xiaolong的个人博客</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Xiaolong的个人博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">爱生活，爱学习</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-mylover">
          <a href="/MyLover" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            menu.mylover
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://rngift.com/2017/05/07/CodeStandars/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小龙">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/lucky.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xiaolong的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/07/CodeStandars/" itemprop="url">
                  代码命名规范
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-07T22:55:46+08:00">
                2017-05-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>代码命名规范在开发过程中极其重要，记得进第一家公司的时候，刚进入就丢了一份java的代码规范文档给我。写了个小demo给当时的主管，然后因为命名规范问题被叫去谈话了,由此可见公司的开发人员都非常重视代码命名。因为很多时候一个应用的开发工作并不是你一个人完成的，你可能会有一个小伙伴与你同时开发，也可能你开发完成后会有其他的小伙伴接替你的工作。如果这个时候别人看到你乱七八糟的代码不知道从哪里下手估计心里早就把你骂了千百遍。换位思考，如果你是接班人，或者和你合作的小伙伴代码写的乱七八糟的。想要用他封装的某个功能，结果毛都没看懂。心里肯定要骂娘呀。<br>作为一个伟大的程序员候选人，我们的目标是创造好用且优雅的代码。<br>啊哈哈，那首先走出第一步。代码命名和注释。</p>
<h5 id="包名"><a href="#包名" class="headerlink" title="包名"></a>包名</h5><p>首先说下Android包名的命名规则。</p>
<p>Andorid的包名一般采用域名的反转，单词全小写。域名为www.example.com的包名为com.example,省略www。</p>
<p>包名的开始是一个顶级域名，比如com,cn,org等，包名使用.做为分隔符。第二位一般是二级域名，也可以根据不同机构各自的命名。<br>后面的命名可以用部门，项目等进行区分（也可以没有）,例如:</p>
<p>com.example.project<br>在项目内可以根据功能不同，按照模块划分不同的包名,com.example.project.user就是表示用户模块。</p>
<p>也可以根据层级的不同而划分不同的包名,比如:com.example.prokect.activity,就是Acitivity相关的包。</p>
<p>当然也可以在不同层级里面再按照模块划分包名，比如:com.example.project.activity.user，表示和用户有关的Activity。</p>
<p>总结,包名一般是以反转域名开始，后面跟有项目名称(缩写，也可以没有)。</p>
<p>后面可以采用的区分包名方式:</p>
<p>按照类功能 com.example.project.bean（实体类） com.example.project.network(存放网络层相关)</p>
<p>模块下区分层级 com.example.project.ui.user;(这边放user模块UI) com.example.project.ui.widger(一些自定义控件)</p>
<h5 id="类和接口"><a href="#类和接口" class="headerlink" title="类和接口"></a>类和接口</h5><p>类名是一个或多个单词组成，采用大驼峰命名，尽量要使类名简洁且利于描述,例如:SignInActivity，类名规则如下：</p>
<p>大驼峰命名<br>简洁而富有表达性<br>尽量不使用缩写（广泛使用的单词除外，比如URL,XML…）<br>多单词中采用 名词+动词的方式命名: LocationManage<br>对于缩写单词要全部大写比如:XMLManage<br>一个类如果继承了Android的组件，需在使用该组件的名称作为后缀，这样容易区分该类的作用，比如: SgnInActivity,UserInfoFragment,FileUploadService…</p>
<p>接口一般使用I开头，采用大驼峰命名规则，比如：IPullToRefresh。</p>
<h5 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h5><p>Android变量分为三种：成员变量,静态变量和常量。</p>
<h6 id="成员变量"><a href="#成员变量" class="headerlink" title="成员变量"></a>成员变量</h6><p>成员变量采用小驼峰命名规则，第一单词的首字母小写，其后的首字母大写。变量名一般不使用_和$开头。例如：</p>
<p>private Intent cropIntent;<br>变量名应简短且易于描述，选用规则尽量简单，易于记忆和联想。</p>
<p>非控件的类成员变量可以用m开头，比如 private UserInfo mUserInfo;</p>
<p>尽量避免单个字符的变量名，除非是用于一次性的临时变量,临时的整形变量一般命名为 i,j,k,m,n。字符型的变量一般使用c,d,e。</p>
<p>对于View变量的命名规则，如果View是一个单词的，采用第一个单词小写的方式+对应View的描述进行,例如：</p>
<p>private View viewUserInfo;<br>如果是两个单词组成的View，比如:TextView,一般采用缩写的方式,例如:</p>
<p>private TextView tvUserName;<br>一般情况下Button缩写为:btn。</p>
<h6 id="静态变量"><a href="#静态变量" class="headerlink" title="静态变量"></a>静态变量</h6><p>为了可以很方便的区分静态变量，静态变量的命名一般采用小写的s开头，后面单词的命名规则和成员变量保持一致，例如:</p>
<p>private static Map<string, string=""> sCacheStrings;</string,></p>
<h6 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h6><p>常量命名规则一般是所有的单词都是大写，中间使用_（下划线）分割，例如：</p>
<p>private static final float SCALE_RATE = 1.25f;<br>代码中不允许出现单独的字符串或数字常量，比如xx.equals(“1”),单独的字符串或数字不利于后期的维护。如果需要使用数据或字符，请按照他们的含义封装成静态常量，或者使用枚举，for语句除外。</p>
<h6 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h6><p>方法命名规则采用小驼峰命名法例如:onCreate(),onRun()，方法名一般采用动词或者动名词。<br>一般使用的方法名前缀。</p>
<p>getXX()返回某个值的方法<br>initXX() 初始化相关方法，比如初始化布局:initView()<br>checkXX()和isXX() 方法为boolean值的时候使用is或者check为前缀<br>saveXX() 保存数据<br>clearXX()和removeXX() 清除数据<br>updateXX() 更新数据<br>processXX() 对数据进行处理<br>dispalyXX() 显示某某信息<br>draswXX() 绘制数据或者效果<br>setXXX()配置某些信息</p>
<h6 id="对于方法的其他一些规范："><a href="#对于方法的其他一些规范：" class="headerlink" title="对于方法的其他一些规范："></a>对于方法的其他一些规范：</h6><p>方法的参数尽可能不超过4个，需要更多的参数的时候可以采用class的方法<br>方法参数中尽量少使用boolean,使用boolean传参不利于代码的阅读<br>方法尽量不超过15行，方法过长，说明当前方法业务逻辑过于复杂，需要进行方法拆分<br>一个方法只做一件事，<br>如果一个方法返回的是一个错误码，可以使用异常<br>不使用try catch 处理业务逻辑<br>尽可能不实用null，替代为异常或者使用空的变量，比如Collections.emptyList()</p>
<h5 id="Layout"><a href="#Layout" class="headerlink" title="Layout"></a>Layout</h5><p>Layout的命名规则需要和使用他们的组件对应，方便查找和维护，比如我们在创建一个用户信息的UserInfoActivity，对应的Layout的命名就应该是activity_user_info.xml。</p>
<p>对应Andorid组件的Layout命名规则:</p>
<p>Activity -&gt; activity_user_info.xml<br>Fragment -&gt; fragment_sign_up.xml<br>Dialog -&gt; dialog_change_password.xml<br>AdapterView Item -&gt; item_user.xml<br>Layout只是一部分 -&gt; partial_stats_bar.xml</p>
<h5 id="string和color"><a href="#string和color" class="headerlink" title="string和color"></a>string和color</h5><p>项目中使用的string,和color的值原则上都是必须放在strings.xml和colors.xml中，不要放在Java代码中，这样的好处是可复用，提高维护性，减少非必要的代码。颜色是因为基本上颜色主题差不多如果有需要改颜色，只需要该一下colors的色值就可以了。string的优势是如果以后做国际化的话string的代码就不需要再次做修改了。如果项目很大这些都没做好想要改掉所有的中文是很麻烦的。</p>
<p>xml的资源命名,字母全部小写，多个单词之间使用_(下划线)分割.</p>
<p>建议color的命名中体现其ARGB值，比如:<br>color_blue_0000ff（看一下大致的颜色后面加上色值）<br>这样的写法对于代码提示更加的友好,有利于对照标注图查找颜色值。</p>
<h5 id="id命名"><a href="#id命名" class="headerlink" title="id命名"></a>id命名</h5><p>建议使用驼峰式命名，使用名词或者名词词组，应该通过id的命名可以直接理解当前的View要实现的功能.在这里使用驼峰命名的优势是，打个下划线特别麻烦。而且你在类中要找到这个命名也很麻烦。比如 tvUserName = findViewById(R.id.tv_user_name);如果都使用驼峰命名，二者是一样的 tvUserName =findViewById(R.id.tvUserName);这样就可以使出copy paste  大招了！！！</p>
<p>例如：</p>
<p>@+id/tvUserName<br>id命名的第一个单词使用View的缩写，如果View只是一个单词，缩写就是当前单词。一般Button的缩写为：btn。</p>
<h5 id="Drawable命名"><a href="#Drawable命名" class="headerlink" title="Drawable命名"></a>Drawable命名</h5><p>Drawable的命名规则根据使用的控件来命名，控件的缩写在前面，后面使用表示其功能的一个或者多个单词，中间使用使用_下划线分割。</p>
<p>Action bar使用ab_，比如:ab<em>stacked.png<br>Button 使用btn</em><br>Dialgo 使用dialog<em><br>Divide 使用 divider</em><br>Icon 使用 ic<em><br>Menu 使用menu</em><br>Notification使用 notification<em><br>Tabs 使用tab</em><br>Drawable是有多个状态的，在命名中体现出状态的不同：</p>
<p>Normal 对应_normal结尾，比如btn_order_normal.9.png<br>Pressed 对应_pressed结尾<br>Focused 对应_focused结尾<br>Disabled 对应_disabled结尾<br>Selected 对应_selected结尾<br>其他资源文件的命名需要遵守Android的规范即可，比如arrays.xml数组文件，dimens.xml分辨的配置，style.xml样式的配置，资源文件的ID命名规则都是才是字母小写，使用下划线分割的原则。</p>
<p>暂时就想到这么多了，有漏的后面再做补充！！</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://rngift.com/2017/05/07/ApiStandars/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小龙">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/lucky.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xiaolong的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/07/ApiStandars/" itemprop="url">
                  未命名
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-07T22:55:46+08:00">
                2017-05-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>title: 接口设计规范<br>date: 2017年5月7日 22:06:41<br>tags:</p>
<pre><code>- 学习
- code about
</code></pre><hr>
<h1 id="接口通用信息"><a href="#接口通用信息" class="headerlink" title="接口通用信息"></a>接口通用信息</h1><h2 id="示例地址"><a href="#示例地址" class="headerlink" title="示例地址"></a>示例地址</h2><pre><code>http://....../app/getApp
</code></pre><p>接口控制器：</p>
<pre><code>外网  http://110.110.1.20/app/

内网  http://192.168.1.22/app/
</code></pre><p>公共参数:</p>
<pre><code>getApp接口名称
</code></pre><h2 id="请求有以下两种方式"><a href="#请求有以下两种方式" class="headerlink" title="请求有以下两种方式"></a>请求有以下两种方式</h2><pre><code>GET

POST
</code></pre><h2 id="上传参数说明"><a href="#上传参数说明" class="headerlink" title="上传参数说明"></a>上传参数说明</h2><pre><code>UUID 设备号：

    每个手机的设备号是唯一的
</code></pre><h2 id="上传参数的格式"><a href="#上传参数的格式" class="headerlink" title="上传参数的格式"></a>上传参数的格式</h2><pre><code>{&quot;key&quot;:&quot;value&quot;,&quot;key1&quot;:value1,&quot;key2&quot;:&quot;value2&quot;,..........}
</code></pre><h2 id="返回的数据规范"><a href="#返回的数据规范" class="headerlink" title="返回的数据规范"></a>返回的数据规范</h2><pre><code>a、明文返回值，直接使用



b、部分字段加密的返回值通过DES.decryptDES()解密，需要key和vi进行解密，



    {

        &quot;code&quot;:1,

        &quot;msg&quot;:&quot;xxxxxx&quot;,

        &quot;data&quot;:{

        }

    }
</code></pre><h2 id="返回数据说明"><a href="#返回数据说明" class="headerlink" title="返回数据说明"></a>返回数据说明</h2><pre><code>a、code 标识返回状态



   1    成功

  -1    失败

-101    token失效

b、msg 服务端返回的说明

c、data为空，返回 {}
</code></pre><h2 id="返回示例"><a href="#返回示例" class="headerlink" title="返回示例"></a>返回示例</h2><pre><code>如：

{

    &quot;code&quot;:1,

    &quot;msg&quot;:&quot;&quot;,

    &quot;data&quot;:{

        &quot;param1&quot;:&quot;xxx&quot;,

        &quot;list&quot;:[

            { 

                &quot;aa&quot;:&quot;xxx&quot;,

                &quot;bb&quot;:1,

                &quot;cc&quot;:&quot;xxxxxx&quot;

            },

            ...........

        ]

    }

}



如2：

{

    &quot;code&quot;:1,

    &quot;msg&quot;:&quot;&quot;,

    &quot;data&quot;:{}

}
</code></pre><h1 id="基础模块"><a href="#基础模块" class="headerlink" title="基础模块"></a>基础模块</h1><h2 id="获取访问令牌"><a href="#获取访问令牌" class="headerlink" title="获取访问令牌"></a>获取访问令牌</h2><p>请求地址</p>
<pre><code>http://192.168.1.20/app/getAccessToken
</code></pre><p>请求方式</p>
<pre><code>POST
</code></pre><p>接口参数</p>
<pre><code>名称           类型        是否必须    示例值                   描述



uuid          String        是    321234098546345634534526   设备号
</code></pre><p>响应参数</p>
<pre><code>名称           类型        是否必须    示例值                   描述



acccessToken  String        是     访问令牌

expiresIn     String        是       28800                  过期时间, 单位为秒（可不做过期）

sessionKey    String        是     78......610              session key(32位字符)

sessionSecret String        是     2222......0              session密钥(32位字符)
</code></pre><p>返回示例</p>
<pre><code>{

    &quot;code&quot;:1,

    &quot;msg&quot;:&quot;&quot;,

    &quot;data&quot;:{

        &quot;accessToken&quot;:&quot;AVjWf49ZrHPXsqA1hwSr7AcheUIb/oaRTR

        s0GzXxzsHBm79lcNLSNGjnisHaDBAWVM

        R8tR0xMQjhIdwkve8eNTs=&quot;,            //访问令牌

        &quot;expiresIn&quot;:28800,                                 //Int, 过期时间, 单位为秒

        &quot;sessionKey&quot;:&quot;787d9f9beeeca3379cde65ff3354e610&quot;,   //session key

        &quot;sessionSecret&quot;:&quot;222baa398b38a499f267ed869215b130&quot;  //session密钥

    }

}
</code></pre><p>code取值</p>
<pre><code> 1成功

-1失败


[TOC]
</code></pre><h1 id="账号模块"><a href="#账号模块" class="headerlink" title="账号模块"></a>账号模块</h1><h2 id="登录（4-10增加返回字段：classNum-grade）"><a href="#登录（4-10增加返回字段：classNum-grade）" class="headerlink" title="登录（4.10增加返回字段：classNum,grade）"></a>登录（4.10增加返回字段：classNum,grade）</h2><p>请求地址</p>
<pre><code>http://..../getLogin
</code></pre><p>请求方式</p>
<pre><code>POST
</code></pre><p>接口参数</p>
<pre><code>名称           类型        是否必须    示例值            描述

stuNo          String         是    SWE13001        学号
stuPsw         String         是    2341            密码
</code></pre><p>响应参数</p>
<pre><code>名称             类型     是否必须     示例值           描述
displayName     String    是       张三            显示名称
authenUserId    String    是       11.......fb    登录用户ID
headerUrl       String    是       http://.x.png  头像
major           String    是       软件工程        专业
stuNo           String    是       SWE13001       学号
phone           String    是       13600000001    联系电话 
calssNum        String    是       软件工程一班     班级 
grade           String    是       2013级         年级
</code></pre><p>返回示例</p>
<pre><code>{
    &quot;code&quot;:1,
    &quot;msg&quot;:&quot;登录成功&quot;,
    &quot;data&quot;:{
        &quot;displayName&quot;:&quot;张三&quot;,
        &quot;headerUrl&quot;：&quot;http://192.168.1.20/image/header.png&quot;
        &quot;authenUserId&quot;:&quot;1120d8d6ea4a4850b65d0faa40d6dffb
        &quot;major&quot;:&quot;软件工程&quot;,
        &quot;stuNo&quot;：&quot;SWE13001&quot;,
        &quot;phone&quot;:&quot;13600000001&quot;,
        &quot;calssNum&quot;：&quot;软件工程一班&quot;,
        &quot;phone&quot;:&quot;2013级&quot;
    }
 }
</code></pre><p>code取值</p>
<pre><code> 1成功
-1失败
</code></pre><h2 id="获取用户头像-已弃用"><a href="#获取用户头像-已弃用" class="headerlink" title="获取用户头像(已弃用)"></a><del>获取用户头像</del>(已弃用)</h2><p>请求地址</p>
<pre><code>http://..../getUserHeader
</code></pre><p>请求方式</p>
<pre><code>POST
</code></pre><p>接口参数</p>
<pre><code>名称           类型        是否必须    示例值            描述

stuNo          String         是    SWE13001        学号
</code></pre><p>响应参数</p>
<pre><code>名称        类型      是否必须    示例值             描述
header        String         是     http://xxx.jpg      头像地址
</code></pre><p>返回示例</p>
<pre><code>{
    &quot;code&quot;:1,
    &quot;msg&quot;:&quot;获取头像成功&quot;,
    &quot;data&quot;:{
        &quot;header&quot;:&quot;http://xxx.jpg&quot;,
    }
 }
</code></pre><p>code取值</p>
<pre><code> 1成功
-1失败
</code></pre><h2 id="注册（已弃用）"><a href="#注册（已弃用）" class="headerlink" title="注册（已弃用）"></a><del>注册</del>（已弃用）</h2><p>请求地址</p>
<pre><code>http://..../register
</code></pre><p>请求方式</p>
<pre><code>POST
</code></pre><p>接口参数</p>
<pre><code>名称           类型     是否必须    示例值            描述

stuNo          String      是     SWE13001        学号（学号要唯一）
stuPsw         String      是     2341            密码
data           String      是     xxxx            二进制数据
name           String      是     picture_0105    图片名称
</code></pre><p>响应参数</p>
<pre><code>名称          类型    是否必须     示例值           描述
stuName      String      是     张三             显示名称
authenUserId String      是     11.......fb     登录用户ID
headerUrl    String      是     http://.x.png   头像
major        String      是     软件工程         专业
stuNo        String      是     SWE13001        学号
phone        String      是     联系电话         13600000001
</code></pre><p>返回示例</p>
<pre><code>{
    &quot;code&quot;:1,
    &quot;msg&quot;:&quot;注册成功&quot;,
    &quot;data&quot;:{
        &quot;displayName&quot;:&quot;张三&quot;,
        &quot;headerUrl&quot;：&quot;http://192.168.1.20/image/header.png&quot;
        &quot;authenUserId&quot;:&quot;1120d8d6ea4a4850b65d0faa40d6dffb
        &quot;major&quot;:&quot;软件工程&quot;,
        &quot;stuNo&quot;：&quot;SWE13001&quot;
        &quot;phone&quot;:&quot;13600000001&quot;
    }
 }
</code></pre><p>code取值</p>
<pre><code> 1成功
-1失败
</code></pre><h1 id="主页"><a href="#主页" class="headerlink" title="主页"></a>主页</h1><h2 id="获取今日课程列表"><a href="#获取今日课程列表" class="headerlink" title="获取今日课程列表"></a>获取今日课程列表</h2><p>请求地址</p>
<pre><code>http://..../getTodayCourse(4.10 state 增加未签到状态)
</code></pre><p>请求方式</p>
<pre><code>POST
</code></pre><p>接口参数</p>
<pre><code>名称          类型    是否必须    示例值     描述

authenUserId String    是    11...ffb   用户ID
</code></pre><p> 响应参数</p>
<pre><code>名称        类型        是否必须    示例值        描述

courseId   String       是     sdfe12        课程Id
name       String       是     软件工程       课程名称
date       String       是     20170122      上课日期
state      int          是      0            签到状态 0未开放签到 1正常
                                                    2旷课      3迟到  4请假 5.未签到
teacher    String       是     顾萍萍        教师名称
classPlace String       是     主一110       上课地点
classTime  int          是     0            节次  0一二节 1三四节 2午一午二
                                                    3五六节 4七八节 5 九十节
</code></pre><p>返回示例</p>
<pre><code>{
    &quot;code&quot;:1,
    &quot;msg&quot;:&quot;&quot;,
    &quot;data&quot;:{
        &quot;total&quot;:5,
        &quot;list&quot;:[
            {
                &quot;courseId&quot;:&quot;sdfe12&quot;,
                &quot;name&quot;:&quot;软件工程&quot;,
                &quot;date&quot;:&quot;20170122&quot;,
                &quot;state&quot;:0,
                &quot;teacher&quot;:顾萍萍,
                &quot;classPlace&quot;:&quot;主一110&quot;,
                &quot;classTime&quot; : 0
            },
            ......
        ]
    }
 }
</code></pre><p>code取值</p>
<pre><code> 1成功
-1失败
</code></pre><h2 id="签到"><a href="#签到" class="headerlink" title="签到"></a>签到</h2><p>请求地址</p>
<pre><code>http://..../signIn
</code></pre><p>请求方式</p>
<pre><code>POST
</code></pre><p>接口参数</p>
<pre><code>名称          类型    是否必须    示例值     描述

authenUserId String    是    11...ffb   用户ID
courseId     String    是    xxxx      课程Id
date         String    是    20170328  日期
image        String    否    xxxx      二进制数据
classTime    int       是    节次       上课时间  0一二节 1三四节 2午一午二
                                                3五六节 4七八节 5九十节
</code></pre><p>返回示例</p>
<pre><code>{
    &quot;code&quot;:1,
    &quot;msg&quot;:&quot;签到成功&quot;,
    &quot;data&quot;:{
    }
 }
</code></pre><p>code取值</p>
<pre><code> 1成功
-1失败
</code></pre><h2 id="获取当前用户全部课程（可以查询每门课的考勤结果）"><a href="#获取当前用户全部课程（可以查询每门课的考勤结果）" class="headerlink" title="获取当前用户全部课程（可以查询每门课的考勤结果）"></a>获取当前用户全部课程（可以查询每门课的考勤结果）</h2><p>请求地址</p>
<pre><code>http://..../getAllCourseList
</code></pre><p>请求方式</p>
<pre><code>POST
</code></pre><p>接口参数</p>
<pre><code>名称          类型    是否必须    示例值     描述
authenUserId String    是    11...ffb   用户ID
</code></pre><p>响应参数</p>
<pre><code>名称        类型        是否必须    示例值        描述

courseId   String       是     sdfe12        课程Id
name       String       是     软件工程       课程名称 
teacher    String       是     顾萍萍          任课教师名称
</code></pre><p>返回示例</p>
<pre><code>{
    &quot;code&quot;:1,
    &quot;msg&quot;:&quot;获取课程列表成功&quot;,
    &quot;data&quot;:{
     &quot;total&quot;:5,
        &quot;list&quot;:[
               {
                &quot;courseId&quot;:&quot;sdfe12&quot;,
                &quot;name&quot;:&quot;软件工程&quot;,
                &quot;teacher&quot;:&quot;任课教师名称&quot;,
            },
            ......
        ]
    }
 }
</code></pre><p>code取值</p>
<pre><code> 1成功
-1失败
</code></pre><h2 id="考勤结果查询-4-10-state-增加未签到状态"><a href="#考勤结果查询-4-10-state-增加未签到状态" class="headerlink" title="考勤结果查询(4.10 state 增加未签到状态)"></a>考勤结果查询(4.10 state 增加未签到状态)</h2><p>请求地址</p>
<pre><code>http://..../checkResult
</code></pre><p>请求方式</p>
<pre><code>POST
</code></pre><p>接口参数</p>
<pre><code>名称          类型    是否必须    示例值     描述

authenUserId String    是    11...ffb   用户ID
startTime    String    是    20170222   起始时间
endTime      String    是    20170222   结束时间
courseId     String    否    “sd11002”  课程Id(为空代表查询全部课程)
</code></pre><p>响应参数</p>
<pre><code>名称        类型        是否必须    示例值        描述

courseId   String       是     sdfe12        课程Id
name       String       是     软件工程       课程名称
date       String       是     20170122      上课日期
state      int          是      0            签到状态 0未开放签到 1正常
                                                    2旷课      3迟到  4请假 5未签到
teacher    String       是     顾萍萍        教师名称
classPlace String       是     主一110       上课地点
classTime  int          是     0            节次  0一二节 1三四节 2午一午二
                                                    3五六节 4七八节 5 九十节
</code></pre><p>返回示例</p>
<pre><code>{
    &quot;code&quot;:1,
    &quot;msg&quot;:&quot;获取考勤结果成功&quot;,
    &quot;data&quot;:{
        &quot;total&quot;:5,
        &quot;list&quot;:[
           {
                &quot;courseId&quot;:&quot;sdfe12&quot;,
                &quot;name&quot;:&quot;软件工程&quot;,
                &quot;date&quot;:&quot;20170122&quot;,
                &quot;state&quot;:0,
                &quot;teacher&quot;:顾萍萍,
                &quot;classPlace&quot;:&quot;主一110&quot;,
                &quot;classTime&quot; : 0
            },
            ......
        ]

    }
 }
</code></pre><p>code取值</p>
<pre><code> 1成功
-1失败
</code></pre><h2 id="考勤结果列表-4-10-state-增加未签到状态"><a href="#考勤结果列表-4-10-state-增加未签到状态" class="headerlink" title="考勤结果列表(4.10 state 增加未签到状态)"></a>考勤结果列表(4.10 state 增加未签到状态)</h2><p>请求地址</p>
<pre><code>http://..../checkTruant
</code></pre><p>请求方式</p>
<pre><code>POST
</code></pre><p>接口参数</p>
<pre><code>名称          类型    是否必须    示例值     描述

authenUserId String    是    11...ffb   用户ID
</code></pre><p>响应参数</p>
<pre><code>名称        类型        是否必须    示例值        描述

courseId   String       是     sdfe12        课程Id
name       String       是     软件工程       课程名称
date       String       是     20170122      上课日期
state      int          是      0            签到状态 0未开放签到 1正常
                                                    2旷课      3迟到  4请假 5.未签到
teacher    String       是     顾萍萍        教师名称
classPlace String       是     主一110       上课地点
classTime  int          是     0            节次  0一二节 1三四节 2午一午二
                                                    3五六节 4七八节 5 九十节
</code></pre><p>返回示例</p>
<pre><code>{
    &quot;code&quot;:1,
    &quot;msg&quot;:&quot;获取考勤结果成功&quot;,
    &quot;data&quot;:{
        &quot;total&quot;:5,
        &quot;list&quot;:[
           {
                &quot;courseId&quot;:&quot;sdfe12&quot;,
                &quot;name&quot;:&quot;软件工程&quot;,
                &quot;date&quot;:&quot;20170122&quot;,
                &quot;state&quot;:0,
                &quot;teacher&quot;:顾萍萍,
                &quot;classPlace&quot;:&quot;主一110&quot;,
                &quot;classTime&quot; : 0
            },
            ......
        ]

    }
 }
</code></pre><p>code取值</p>
<pre><code> 1成功
-1失败
</code></pre><h2 id="获取本周课程列表"><a href="#获取本周课程列表" class="headerlink" title="获取本周课程列表"></a>获取本周课程列表</h2><p>请求地址</p>
<pre><code>http://..../getWeekCourse(4.10 state 增加未签到状态)
</code></pre><p>请求方式</p>
<pre><code>POST
</code></pre><p>接口参数</p>
<pre><code>名称          类型    是否必须    示例值     描述

authenUserId String    是    11...ffb   用户ID
</code></pre><p> 响应参数</p>
<pre><code>名称        类型        是否必须    示例值        描述

courseId   String       是     sdfe12        课程Id
name       String       是     软件工程       课程名称
date       String       是     20170122      上课日期
state      int          是      0            签到状态 0未开放签到 1正常
                                                    2旷课      3迟到  4请假 5.未签到
teacher    String       是     顾萍萍        教师名称
classPlace String       是     主一110       上课地点
classTime  int          是     0            节次  0一二节 1三四节 2午一午二
                                                    3五六节 4七八节 5 九十节
</code></pre><p>返回示例</p>
<pre><code>{
    &quot;code&quot;:1,
    &quot;msg&quot;:&quot;&quot;,
    &quot;data&quot;:{
        &quot;total&quot;:5,
        &quot;list&quot;:[
            {
                &quot;courseId&quot;:&quot;sdfe12&quot;,
                &quot;name&quot;:&quot;软件工程&quot;,
                &quot;date&quot;:&quot;20170122&quot;,
                &quot;state&quot;:0,
                &quot;teacher&quot;:顾萍萍,
                &quot;classPlace&quot;:&quot;主一110&quot;,
                &quot;classTime&quot; : 0
            },
            ......
        ]
    }
 }
</code></pre><p>code取值</p>
<pre><code> 1成功
-1失败
</code></pre><h2 id="请假"><a href="#请假" class="headerlink" title="请假"></a>请假</h2><p>请求地址</p>
<pre><code>http://..../takeOff
</code></pre><p>请求方式</p>
<pre><code>POST
</code></pre><p>接口参数</p>
<pre><code>名称          类型    是否必须    示例值     描述
authenUserId String    是      11...ffb   用户ID
courseId     String    是      ddasd131   课程ID
date         String    是      20170328   请假日期
classTime    int       是         0       节次  0一二节 1三四节 2午一午二
                                                    3五六节 4七八节 5 九十节
data         String    是      xxxx       二进制数据
name         Sring     是      xxx.png    图片名称
reason       String    是      想睡觉      请假理由
</code></pre><p>响应参数</p>
<pre><code>名称        类型        是否必须    示例值        描述
</code></pre><p>返回示例</p>
<pre><code>{
    &quot;code&quot;:1,
    &quot;msg&quot;:&quot;请假成功&quot;,
    &quot;data&quot;:{
    }
 }
</code></pre><p>code取值</p>
<pre><code> 1成功
-1失败
</code></pre><h2 id="图片上传-4-10弃用"><a href="#图片上传-4-10弃用" class="headerlink" title="图片上传(4.10弃用)"></a><del>图片上传</del>(4.10弃用)</h2><p>请求地址</p>
<pre><code>http://..../uploadPicture
</code></pre><p>请求方式</p>
<pre><code>POST
</code></pre><p>接口参数</p>
<pre><code>名称          类型    是否必须    示例值     描述

authenUserId String  是    11...ffb      用户ID
data         String  是  xxxx           二进制数据
name         String  是 picture_0105    图片名称
type         int     是       0         0头像
</code></pre><p>返回示例</p>
<pre><code>{
    &quot;code&quot;:1,
    &quot;msg&quot;:&quot;头像上传成功！&quot;,
    &quot;data&quot;:{
    }
 }
</code></pre><p>code取值</p>
<pre><code> 1成功
-1失败
</code></pre><h2 id="用户密码修改（4-10新增）"><a href="#用户密码修改（4-10新增）" class="headerlink" title="用户密码修改（4.10新增）"></a>用户密码修改（4.10新增）</h2><p>请求地址</p>
<pre><code>http://..../pswModify
</code></pre><p>请求方式</p>
<pre><code>POST
</code></pre><p>接口参数</p>
<pre><code>名称          类型    是否必须    示例值     描述

authenUserId String  是    11...ffb      用户ID
oldpsw       String  是    10086         旧密码
newpsw       String  是    10087         新密码
</code></pre><p>返回示例</p>
<pre><code>{
    &quot;code&quot;:1,
    &quot;msg&quot;:&quot;密码修改成功！&quot;,
    &quot;data&quot;:{
    }
 }
</code></pre><p>code取值</p>
<pre><code> 1成功
-1失败
</code></pre><h2 id="用户信息修改（4-10新增）"><a href="#用户信息修改（4-10新增）" class="headerlink" title="用户信息修改（4.10新增）"></a>用户信息修改（4.10新增）</h2><p>请求地址</p>
<pre><code>http://..../userInfoModify
</code></pre><p>请求方式</p>
<pre><code>POST
</code></pre><p>接口参数</p>
<pre><code>名称          类型    是否必须    示例值     描述

authenUserId String  是    11...ffb      用户ID
phone        String  是    10086         手机号码
</code></pre><p>返回示例</p>
<pre><code>{
    &quot;code&quot;:1,
    &quot;msg&quot;:&quot;修改成功！&quot;,
    &quot;data&quot;:{
    }
 }
</code></pre><p>code取值</p>
<pre><code> 1成功
-1失败
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://rngift.com/2017/05/07/SummaryOfWork/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小龙">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/lucky.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xiaolong的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/07/SummaryOfWork/" itemprop="url">
                  工作总结（二）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-07T13:32:20+08:00">
                2017-05-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="闲谈："><a href="#闲谈：" class="headerlink" title="闲谈："></a>闲谈：</h4><h5 id="工作总结"><a href="#工作总结" class="headerlink" title="工作总结"></a>工作总结</h5><p>######又换了新工作了，讲一下离职原因吧</p>
<ol>
<li>工作太闲（因为业务砍了很多，所以手头上的事情都很少，几个Android开发维护一个项目，基本上每天的上班时间都是是在逛论坛，写博客）</li>
<li>新的生活环境不适应（这个也算是一个大原因，以前是住岛内跟朋友合住，但是后面公司搬到岛外去了，跟着公司去岛外找了个房子，那边的房子比较潮湿，基本上每天都病怏怏的，特别难受。）</li>
<li>工资不涨（这是我的第二家公司，那时候已经在第一家基本熟悉了整个开发流程才到这家公司，那时候开的薪资特别低，说到底还是自己的原因啦，感觉每次去一家公司工资都比别人低。并不是技术比别人差，而是不会强势）</li>
</ol>
<p>上一家公司是纯互联网公司，主营业务做的是旅游行业B2B的业务，公司规模还算可以。我是在快毕业那会进这家公司的,在这家公司工作的期间算是我成长最快的一个时期，在这家公司学到了好多东西。</p>
<p>从一些主流第三方框架学习到项目架构设计封装。一些项目功能的抽取封装。项目中有很多的设计模式，单例模式，观察者模式，责任链模式，建造者模式，装饰器模式，适配器模式。基本都能在这家公司原来的框架里看到。在这边看到了很多很有意思的代码。至少在我之前是没想到还有这么写的。这里其实应该感谢之前公司的老大，工作了十几年，他的技术特别强，对于封装还有架构的设计都有自己的思路。刚进去从熟悉代码，到代码规范，基本都对我指点了一番。在我离开之际他开始着手跨平台开发了。</p>
<p>很可惜不跟随他和公司一起往下走，但心里一直存有感激。（其实对于自己有过的每一份工作即使离开了心里多少都会有感激，毕竟这是成长过程中可贵的经历）</p>
<h6 id="谈一下新公司的工作"><a href="#谈一下新公司的工作" class="headerlink" title="谈一下新公司的工作"></a>谈一下新公司的工作</h6><p>关于入职，这段时间在各大招聘平台上找了不少工作，投了很多相对而言比较大的公司的简历。也面试了几家，给我的感觉是现在的Android开发供过于求。<br>企业开始各种筛选各种挑，也确实，现在Andorid开发的门槛特别低，随便会写点java，网上找找现成的源码。就可以开发出自己想要的功能了。一些框架也比以前好很多，网上都很多 retrofit,okhttp,MVP架构的项目demo，随便拿一个来用就可以实现大多数APP了。<br>所以我其实这份工作更考虑找一个framework层开发的工作。看了这家公司的资料，很多东西都是关于硬件方面的，我以为这份工作就是底层的工作了，那时候面试的时候，我现在的经理有跟我说蓝牙相关的，我以为是针对于蓝牙的二次开发。直接说可以了，但其实用到的是蓝牙接口的一些命令来实现与硬件做交互，实际上的核心还是偏向应用层开发。<br>由于软件部门较小，所以很多流程都不完善，没有原型文档，没有接口文档，UI特别少，刚进来的时候一脸懵逼。<br>比如说销售会直接跟我们提开发相关的功能，测试也基本都是销售和产品经理兼职测试。一个项目下来要做的东西特别杂，经常因为没有确定好需求，需要修修补补。但这样也有一个好处是开发流程的时间能节省不少，毕竟少了一个产品与销售沟通和出原型的过程，当然更大的一个好处是部门还小，这些可以自己去完善，制定规则，到时候发展空间也比较大。总之干一行爱一行吧。</p>
<h5 id="谈一些工作中遇到的坑"><a href="#谈一些工作中遇到的坑" class="headerlink" title="谈一些工作中遇到的坑"></a>谈一些工作中遇到的坑</h5><p>公司有几份项目特别老，大概有三四年左右的历史了，里面的代码也不能说乱吧。就是命名规范简直不忍直视，能达得到我工作之前的水平了。我找一个功能的代码找了半天。<br>觉得命名规范这个东西还是需要每个人都去注意一下。<br>接下来打算整理一份命名规范的文档。<br>代码命名很重要！！！代码命名很重要！！！代码命名很重要！！！不要给自己和后人留坑！！</p>
<p><strong><em>By xiaolong：You have a dream,you got to protect it!</em></strong></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://rngift.com/2016/08/08/Summary 2016-08-08/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小龙">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/lucky.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xiaolong的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/08/Summary 2016-08-08/" itemprop="url">
                  工作总结（一）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-08-08T14:23:44+08:00">
                2016-08-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="闲谈："><a href="#闲谈：" class="headerlink" title="闲谈："></a>闲谈：</h5><h6 id="工作总结"><a href="#工作总结" class="headerlink" title="工作总结"></a>工作总结</h6><p>总结一下最近工作，换了新环境，感觉有好多东西要学的，在这里接触的大部分是Android的新技术。现在对Android开发使用的技术与上一家公司使用的技术进行对比。</p>
<pre><code>         新公司                            原公司
网络请求：Retrofit+RxJava                  Volley+OkHttp
数据解析：Gson+Retrofit                      Gson
本地数据存储：SQLlite+Sharepreference        SQLlite+Sharepreference
布局工具：AutoLayout                          Android原生
Log工具：orhanobut:logger                    自己封装的DebugUtil
框架模式：MVP                              无
代码支持：Lambda                              无
事件总线：eventBus，Broadcast                 Broadcast
PullTorefresh：RecycleView                  ListView,GridView...
其他：支持高版本沉浸式                        无
</code></pre><p>总的来讲新公司用的东西都是比较新的东西，之前一直想要研究来着，都不知道从哪里学起，终于有机会好好学。<br>其实旧公司的框架算是很稳定的框架，开发时间较长，里面封装了好多工具类，基本上可以支持大部分开发需求，节省了好多人力资源。不过因为框架是比较老的而且进行了好多封装，如果要重构的话可以说牵一发动全身。<br>老框架虽然稳定，但是他不好做修改。但新框架又有很多需要研究的东西。算是各有千秋吧。<br>可能对于有些人他们就喜欢用稳定的框架开发，但作为一名刚下水的移动端开发者来讲我还是觉得新的东西蛮不错的，至少有好多东西可以深入学习，而且这些新技术至少在这几年内还会是主流，这也是学新技术的优势所在啊。<br>对于工作上面的感受就是这样，很喜欢现在有的工作环境。</p>
<h6 id="担忧"><a href="#担忧" class="headerlink" title="担忧"></a>担忧</h6><p>顺便讲一讲作为一名原生移动端开发者的担忧，最近这几年，尤其是今年Html5发展迅速，再加上4G网络的普及，网速不再成为制约，移动端的Html5开发渐渐成了主流。在年初的时候还没觉得Html5市场占有率这么高，大部分应用也就几个页面做成Web版的，原生的还是占大头。但最近接触的项目渐渐的有大部分页面为纯H5页面开发了。目前接手的几个项目中H5的占比都超过50%了，今天刚要开始的一个项目也是有百分之六七十的页面做成了H5。心中的担忧还是没错的，Html5日渐成熟，现在H5前端开发工程师渐渐成为了主流，特别是移动端这边的，由于各种条件的驱使，H5页面开发也趋于主流。感觉Android和IOS原生渐渐沦为管道了。现在部分应用还是会保留部分原生来确保用户体验，但是随着H5及5G的慢慢普及，原生的部分只会越来越少，到时候一个项目中Android和IOS可能需要的人力就很低了。Html5的需求很明显了。</p>
<pre><code>现在对比一下自己感觉中的H5所具备的优势。
1.开发成本低，H5页面是可以跨平台使用的，开发的时候只需要一套H5页面就可以实现两个平台的功能
2.维护成本也低啊，H5相比原生来讲不需要两个平台同时进行修改，只需要修改一下web页就可以  
3.迭代用户看不见的，用户根本不需要更新安装包，新版本直接就可以体验到了。
4.有bug可以及时修复，不需要再次的版本发布
</code></pre><p>可以看出 在开发和过程中使用h5开发可以节省大量人力成本，原本需要十个人干的活现在只需要6-8个公司肯定乐意啊，而且更多时候可以立即修复的bug，可以免安装进行的更新，用户肯定买单。对于用户体验来讲这绝对是非常酸爽的体验。</p>
<h5 id="写一点开发过程中遇到的坑"><a href="#写一点开发过程中遇到的坑" class="headerlink" title="写一点开发过程中遇到的坑"></a>写一点开发过程中遇到的坑</h5><p>1.印象比较深刻的<br>之前在自定义虚线的时候，发现预览虚线显示正常，但是装机运行后虚线显示就变成了实线。代码如下<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">       <span class="attr">android:shape</span>=<span class="string">"line"</span> &gt;</div><div class="line">    <span class="tag">&lt;<span class="name">stroke</span></span></div><div class="line">        <span class="attr">android:dashGap</span>=<span class="string">"6px"</span></div><div class="line">        <span class="attr">android:dashWidth</span>=<span class="string">"12px"</span></div><div class="line">        <span class="attr">android:width</span>=<span class="string">"1px"</span></div><div class="line">        <span class="attr">android:color</span>=<span class="string">"@color/colorLine"</span> /&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>实在找不到原因，然后后面找了一些网上的解决办法在<a href="http://wv1124.iteye.com/blog/218720" target="_blank" rel="external">地址</a> 终于找到了问题的解决方案了，好吧，直接在Manifest中，把使用到这个layout的Activity的设置了 android:hardwareAccelerated=”false”成功解决问题！！</p>
<p><strong><em>By Xiaolong：You have a dream,you got to protect it!</em></strong></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://rngift.com/2016/08/07/Generic/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小龙">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/lucky.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xiaolong的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/07/Generic/" itemprop="url">
                  java泛型
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-08-07T21:56:33+08:00">
                2016-08-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="闲谈："><a href="#闲谈：" class="headerlink" title="闲谈："></a>闲谈：</h5><p>说到泛型，大部分人肯定都不陌生，在我学习泛型之前，对他的概念是一个T类型的对象，它可以指代各种类型。没错，可以这么理解，但是其中又有很多值得思考的问题，泛型跟Object有什么区别，泛型的用法等等，这些都是值得我们去深思的一个问题。<br>以前一直都想着利用泛型来好好装逼，但是因为技术不足，也可以说是人懒，对java的理解没有这么深刻，学习的过程中总觉得特别困难，一直都处于一知半解的状态，最近在公司项目开发过程中，发现框架里面有好多东西都运用了泛型优化代码，感觉也差不多是再对泛型进一步学习的时候了。</p>
<p>说一说我印象最深刻的几行代码，是用来简化Android控件绑定的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">protect (V extends View) myFindView(<span class="keyword">int</span> resId)</div><div class="line">&#123;</div><div class="line">	<span class="keyword">return</span> (V)findViewById(resId);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这个是写在了基类的Activity中作为所有Activity的父类，在子类中findViewById的写法就变成了如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">TextView  mTextView = myFindView(R.id.mTextView);</div></pre></td></tr></table></figure></p>
<p>对比android原生自带的findViewById是不是直接取消了类型的强转，这如果在Activity很多的情况下是可以少很多代码和时间的。<br>直接取消掉了类型的强转，是不是简单了许多。好了，这么一个强大的东西，是时候好好学习一波了。</p>
<h3 id="一、泛型的概念"><a href="#一、泛型的概念" class="headerlink" title="一、泛型的概念"></a>一、泛型的概念</h3><p>泛型实现了参数化类型的概念，使代码可以应用于多种类型。在你创建参数化类型的一个实例时，编译器会为你负责转型操作，并且保证类型的正确性。</p>
<h3 id="二、泛型的使用"><a href="#二、泛型的使用" class="headerlink" title="二、泛型的使用"></a>二、泛型的使用</h3><h4 id="普通泛型"><a href="#普通泛型" class="headerlink" title="普通泛型"></a>普通泛型</h4><p>有许多原因促成了泛型的出现，而最引人注目的一个原因就是为了创造容器类。基本上所有的程序运行时都要求你持有一大堆对象，所以容器类算得上最具重用性的类库之一。<br>接下来我们可以通过对比来裂解一下泛型作为容器类的好处<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Model</span></span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Holder1</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> AModel mAModel;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Holder1</span><span class="params">(AModel AModel)</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">this</span>.mAModel=AModel;</div><div class="line">	&#125;</div><div class="line">	<span class="function">AModel <span class="title">get</span><span class="params">()</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">return</span> mAModel;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这个类可以明确指定其持有的对象类型，但他的重用性就不怎么样了。试想一下如果我们也有一个BModel同样需要放在这样一个容器持有类中。再重新写一个类代码就显得太多太杂了，毕竟要实现的功能是差不多的。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Holder2</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> Object mModel;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Holder2</span><span class="params">(Object model)</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">this</span>.mModel=model;</div><div class="line">	&#125;</div><div class="line">	<span class="function">Object <span class="title">get</span><span class="params">()</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">return</span> mModel;</div><div class="line">	&#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		Holder2 h2 = <span class="keyword">new</span> Holder2(<span class="keyword">new</span> Model());</div><div class="line">		Model model = (Model) h2.get();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>现在Holder 可以存放各种不同类型的对象了，因为所有的java类都是Object的子类，java支持向上向下转型的。所以这个代码可以作为任意类型的容器了。<br>有些情况下，我们确实希望容器能够同时持有多种类型的对象，但是，通常而言，我们只会使用容器来存储一种类型的对象。泛型的主要目前之一就是用来指定容器要持有什么类型的对象，而由编译器来保证类型的正确性。<br>因此，与其使用Object,我们更喜欢暂时不指定类型，而是稍后再决定具体使用什么类型。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Holder3</span>&lt;<span class="title">T</span>&gt; </span>&#123;</div><div class="line">	<span class="keyword">private</span> T mModel;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Holder3</span><span class="params">(T model)</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">this</span>.mModel=model;</div><div class="line">	&#125;</div><div class="line">	<span class="function">T <span class="title">get</span><span class="params">()</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">return</span> mModel;</div><div class="line">	&#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">    &#123;</div><div class="line">    	Holder3&lt;Model&gt; h3 = <span class="keyword">new</span> Holder3(<span class="keyword">new</span> Model());</div><div class="line">       	Model model = h3.get();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>现在，当你创建Holder3对象时必须指明想持有什么类型的对象，将其置于尖括号内。然后你就能在Holder3存入该类型。<br>并且，在你从Holder3取出它的持有对象时，自动就是正确的类型。<br>现在我们来试试元组，持有多种不同类型。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TwoTuple</span>&lt;<span class="title">A</span>,<span class="title">B</span>&gt;</span></div><div class="line">   &#123;</div><div class="line">   	<span class="keyword">public</span> <span class="keyword">final</span> A first;</div><div class="line">       <span class="keyword">public</span> <span class="keyword">final</span> B second;</div><div class="line">       <span class="function"><span class="keyword">public</span> <span class="title">TwoTuple</span><span class="params">(A a,B b)</span></span></div><div class="line">       &#123;</div><div class="line">       	first=a;</div><div class="line">           second=b;</div><div class="line">       &#125;</div><div class="line">   &#125;</div></pre></td></tr></table></figure></p>
<p>现在我们拥有了一个可以持有两个对象的元组了，如果我们再需要三个对象的元组。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> class <span class="title">ThreeTuple</span><span class="params">(A,B,C)</span> exrebds TwoTuple&lt;A,B&gt;</span></div><div class="line">   &#123;</div><div class="line">   	<span class="keyword">public</span> <span class="keyword">final</span> C third;</div><div class="line">       <span class="function"><span class="keyword">public</span> <span class="title">ThreeTuple</span><span class="params">(A a,B b,C c)</span></span></div><div class="line">       &#123;</div><div class="line">       	<span class="keyword">super</span>(a,b)</div><div class="line">           third=c;</div><div class="line">       &#125;</div><div class="line">   &#125;</div></pre></td></tr></table></figure></p>
<h5 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h5><pre><code>不知道有没有人注意到 Holder3&lt;Model&gt; h3 = new Holder3(new Model());在初始化这个对象持有类的时候我们指明了我们想要的类型。然后编译器自动帮我们编译成了这个类型。也就是说编译器在执行h3.get();的时候它是已经明确知道了h3.get()的类型了，并自动进行了强转。而Model model = (Model) h2.get();这个，当编译器在执行这一句的时候他还不知道h2.get()到底是什么类型，最后我们告诉它，要强转成Model以适配model这个实例化对象，来进行存储。
</code></pre><p>接下来讲讲泛型接口</p>
<h4 id="泛型接口"><a href="#泛型接口" class="headerlink" title="泛型接口"></a>泛型接口</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Info</span>&lt;<span class="title">T</span>&gt;</span>&#123;        <span class="comment">// 在接口上定义泛型  </span></div><div class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getVar</span><span class="params">()</span> </span>; <span class="comment">// 定义抽象方法，抽象方法的返回值就是泛型类型  </span></div><div class="line">&#125;  </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">InfoImpl</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">Info</span>&lt;<span class="title">T</span>&gt;</span>&#123;   <span class="comment">// 定义泛型接口的子类  </span></div><div class="line">    <span class="keyword">private</span> T var ;             <span class="comment">// 定义属性  </span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">InfoImpl</span><span class="params">(T var)</span></span>&#123;     <span class="comment">// 通过构造方法设置属性内容  </span></div><div class="line">        <span class="keyword">this</span>.setVar(var) ;    </div><div class="line">    &#125;  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setVar</span><span class="params">(T var)</span></span>&#123;  </div><div class="line">        <span class="keyword">this</span>.var = var ;  </div><div class="line">    &#125;  </div><div class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getVar</span><span class="params">()</span></span>&#123;  </div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.var ;  </div><div class="line">    &#125;  </div><div class="line">&#125;;  </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericsDemo24</span></span>&#123;  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String arsg[])</span></span>&#123;  </div><div class="line">        Info&lt;String&gt; i = <span class="keyword">null</span>;        <span class="comment">// 声明接口对象  </span></div><div class="line">        i = <span class="keyword">new</span> InfoImpl&lt;String&gt;(<span class="string">"汤姆"</span>) ;  <span class="comment">// 通过子类实例化对象  </span></div><div class="line">        System.out.println(<span class="string">"内容："</span> + i.getVar()) ;  </div><div class="line">    &#125;  </div><div class="line">&#125;;  </div><div class="line">----------------------------------------------------------  </div><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Info</span>&lt;<span class="title">T</span>&gt;</span>&#123;        <span class="comment">// 在接口上定义泛型  </span></div><div class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getVar</span><span class="params">()</span> </span>; <span class="comment">// 定义抽象方法，抽象方法的返回值就是泛型类型  </span></div><div class="line">&#125;  </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">InfoImpl</span> <span class="keyword">implements</span> <span class="title">Info</span>&lt;<span class="title">String</span>&gt;</span>&#123;   <span class="comment">// 定义泛型接口的子类  </span></div><div class="line">    <span class="keyword">private</span> String var ;                <span class="comment">// 定义属性  </span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">InfoImpl</span><span class="params">(String var)</span></span>&#123;        <span class="comment">// 通过构造方法设置属性内容  </span></div><div class="line">        <span class="keyword">this</span>.setVar(var) ;    </div><div class="line">    &#125;  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setVar</span><span class="params">(String var)</span></span>&#123;  </div><div class="line">        <span class="keyword">this</span>.var = var ;  </div><div class="line">    &#125;  </div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getVar</span><span class="params">()</span></span>&#123;  </div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.var ;  </div><div class="line">    &#125;  </div><div class="line">&#125;;  </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericsDemo</span></span>&#123;  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String arsg[])</span></span>&#123;  </div><div class="line">        Info i = <span class="keyword">null</span>;      <span class="comment">// 声明接口对象  </span></div><div class="line">        i = <span class="keyword">new</span> InfoImpl(<span class="string">"汤姆"</span>) ;    <span class="comment">// 通过子类实例化对象  </span></div><div class="line">        System.out.println(<span class="string">"内容："</span> + i.getVar()) ;  </div><div class="line">    &#125;  </div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>泛型也可以应用于接口，例如生成器，作为工厂方法设计模式的一种应用。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line">	</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Generator</span>&lt;<span class="title">T</span>&gt; </span>&#123;<span class="comment">//生成器接口</span></div><div class="line">	<span class="function">T <span class="title">next</span><span class="params">()</span></span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Coffee</span> </span>&#123;<span class="comment">//咖啡类</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">long</span> counter = <span class="number">0</span>;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">long</span> id = counter++;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> getClass().getSimpleName() + <span class="string">" "</span> + id;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Latte</span> <span class="keyword">extends</span> <span class="title">Coffee</span></span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mocha</span> <span class="keyword">extends</span> <span class="title">Coffee</span></span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cappuccino</span> <span class="keyword">extends</span> <span class="title">Coffee</span></span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Americano</span> <span class="keyword">extends</span> <span class="title">Coffee</span></span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Breve</span> <span class="keyword">extends</span> <span class="title">Coffee</span></span>&#123;&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 咖啡生成器类，随机生成咖啡</div><div class="line"> * <span class="doctag">@author</span> T157</div><div class="line"> *</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CoffeeGenerator</span> <span class="keyword">implements</span> <span class="title">Generator</span>&lt;<span class="title">Coffee</span>&gt;,<span class="title">Iterable</span>&lt;<span class="title">Coffee</span>&gt;</span>&#123;</div><div class="line">	<span class="keyword">private</span> Class[] types = &#123;Latte.class,Mocha.class,Cappuccino.class,Americano.class,Breve.class&#125;;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> Random rand = <span class="keyword">new</span> Random(<span class="number">47</span>);</div><div class="line">	</div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> mSize;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">CoffeeGenerator</span><span class="params">()</span></span>&#123;&#125;;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">CoffeeGenerator</span><span class="params">(<span class="keyword">int</span> size)</span> </span>&#123;</div><div class="line">		mSize=size;</div><div class="line">	&#125;</div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> Iterator&lt;Coffee&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="comment">// TODO Auto-generated method stub</span></div><div class="line">		<span class="keyword">return</span> <span class="keyword">new</span> CoffeeInterator();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> Coffee <span class="title">next</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			<span class="keyword">return</span> (Coffee)types[rand.nextInt(types.length)].newInstance();</div><div class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">			<span class="comment">// TODO Auto-generated catch block</span></div><div class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CoffeeInterator</span> <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">Coffee</span>&gt;</span>&#123;</div><div class="line">		<span class="keyword">int</span> count =mSize;</div><div class="line">		<span class="meta">@Override</span></div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</div><div class="line">			<span class="keyword">return</span> count&gt;<span class="number">0</span>;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="meta">@Override</span></div><div class="line">		<span class="function"><span class="keyword">public</span> Coffee <span class="title">next</span><span class="params">()</span> </span>&#123;</div><div class="line">			count--;</div><div class="line">			<span class="keyword">return</span> CoffeeGenerator.<span class="keyword">this</span>.next();</div><div class="line">		&#125;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span></span></div><div class="line">		&#123;</div><div class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		CoffeeGenerator gen = <span class="keyword">new</span> CoffeeGenerator();</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)</div><div class="line">		&#123;</div><div class="line">			System.out.println(gen.next());</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">for</span>(Coffee c: <span class="keyword">new</span> CoffeeGenerator(<span class="number">5</span>))</div><div class="line">		&#123;</div><div class="line">			System.out.println(c);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="泛型方法"><a href="#泛型方法" class="headerlink" title="泛型方法"></a>泛型方法</h4><p>只需要在方法返回类型前加泛型参数就可以啦，看代码<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Demo</span></span>&#123;  </div><div class="line">    <span class="keyword">public</span> &lt;T&gt; <span class="function">T <span class="title">fun</span><span class="params">(T t)</span></span>&#123;            <span class="comment">// 可以接收任意类型的数据  </span></div><div class="line">        <span class="keyword">return</span> t ;                  <span class="comment">// 直接把参数返回  </span></div><div class="line">    &#125;  </div><div class="line">&#125;;  </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericsDemo</span></span>&#123;  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;  </div><div class="line">        Demo d = <span class="keyword">new</span> Demo() ;   <span class="comment">// 实例化Demo对象  </span></div><div class="line">        String str = d.fun(<span class="string">"汤姆"</span>) ; <span class="comment">//   传递字符串  </span></div><div class="line">        <span class="keyword">int</span> i = d.fun(<span class="number">30</span>) ;     <span class="comment">// 传递数字，自动装箱  </span></div><div class="line">        System.out.println(str) ;   <span class="comment">// 输出内容  </span></div><div class="line">        System.out.println(i) ;     <span class="comment">// 输出内容  </span></div><div class="line">    &#125;  </div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>通过泛型方法返回泛型类型实例<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Info</span>&lt;<span class="title">T</span>&gt;</span>&#123;    <span class="comment">// 指定上限</span></div><div class="line">    <span class="keyword">private</span> T var ;     <span class="comment">// 此类型由外部决定  </span></div><div class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getVar</span><span class="params">()</span></span>&#123;  </div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.var ;     </div><div class="line">    &#125;  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setVar</span><span class="params">(T var)</span></span>&#123;  </div><div class="line">        <span class="keyword">this</span>.var = var ;  </div><div class="line">    &#125;  </div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;       <span class="comment">// 覆写Object类中的toString()方法  </span></div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.var.toString() ;      </div><div class="line">    &#125;  </div><div class="line">&#125;;  </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericsDemo</span></span>&#123;  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;  </div><div class="line">        Info&lt;String&gt; i1 = <span class="keyword">new</span> Info&lt;String&gt;() ;  </div><div class="line">        Info&lt;String&gt; i2 = <span class="keyword">new</span> Info&lt;String&gt;() ;  </div><div class="line">        i1.setVar(<span class="string">"HELLO"</span>) ;        <span class="comment">// 设置内容  </span></div><div class="line">        i2.setVar(<span class="string">"汤姆"</span>) ;       <span class="comment">// 设置内容  </span></div><div class="line">        add(i1,i2) ;  </div><div class="line">    &#125;  </div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(Info&lt;T&gt; i1,Info&lt;T&gt; i2)</span></span>&#123;  </div><div class="line">        System.out.println(i1.getVar() + <span class="string">" "</span> + i2.getVar()) ;  </div><div class="line">    &#125;  </div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>使用泛型统一传入的参数类型<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Info</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Number</span>&gt;</span>&#123; <span class="comment">// 指定上限，只能是数字类型  </span></div><div class="line">    <span class="keyword">private</span> T var ;     <span class="comment">// 此类型由外部决定  </span></div><div class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getVar</span><span class="params">()</span></span>&#123;  </div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.var ;     </div><div class="line">    &#125;  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setVar</span><span class="params">(T var)</span></span>&#123;  </div><div class="line">        <span class="keyword">this</span>.var = var ;  </div><div class="line">    &#125;  </div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;       <span class="comment">// 覆写Object类中的toString()方法  </span></div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.var.toString() ;      </div><div class="line">    &#125;  </div><div class="line">&#125;;  </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericsDemo</span></span>&#123;  </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;  </div><div class="line">        Info&lt;Integer&gt; i = fun(<span class="number">30</span>) ;  </div><div class="line">        System.out.println(i.getVar()) ;  </div><div class="line">    &#125;  </div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T extends Number&gt; <span class="function">Info&lt;T&gt; <span class="title">fun</span><span class="params">(T param)</span></span>&#123;<span class="comment">//方法中传入或返回的泛型类型由调用方法时所设置的参数类型决定  </span></div><div class="line">        Info&lt;T&gt; temp = <span class="keyword">new</span> Info&lt;T&gt;() ;      <span class="comment">// 根据传入的数据类型实例化Info  </span></div><div class="line">        temp.setVar(param) ;        <span class="comment">// 将传递的内容设置到Info对象的var属性之中  </span></div><div class="line">        <span class="keyword">return</span> temp ;   <span class="comment">// 返回实例化对象  </span></div><div class="line">    &#125;  </div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<hr>
<pre><code>学习完泛型我们可以知道，泛型并非只用一个T字幕来表达，它的命名风格基本为大写的英文字母，比如ABCDEFG... 泛型可以通过继承来定义上限。可以实现泛型的方法，泛型类，泛型接口，可以定义泛型数组泛型嵌套等一系列使用方法。

它跟Object的区别：是没有泛型的情况的下，通过对类型Object的引用来实现参数的“任意化”，“任意化”带来的缺点是要做显式的强制类型转换，而这种转换是要求开发者对实际参数类型可以预知的情况下进行的。对于强制类型转换错误的情况，编译器可能不提示错误，在运行的时候才出现异常，这是一个安全隐患。

泛型的好处是在编译的时候检查类型安全，并且所有的强制转换都是自动和隐式的，提高代码的重用率。
</code></pre><p><a href="http://iteye.blog.163.com/blog/static/18630809620131472312201/" target="_blank" rel="external">参考自网易博客北漂的小羊</a><br>java编程思想第四版 泛型篇<br><strong><em>By Xiaolong：You have a dream,you got to protect it!</em></strong></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://rngift.com/2016/06/20/Lambda/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小龙">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/lucky.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xiaolong的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/20/Lambda/" itemprop="url">
                  Java中的Lambda表达式的使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-06-20T22:52:55+08:00">
                2016-06-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>RxJava学习第一篇，一个优美的表达式，Lambda表达式。</p>
<h5 id="闲谈："><a href="#闲谈：" class="headerlink" title="闲谈："></a>闲谈：</h5><p>之前加入某个python群的时候群验证就要求用Lambda实现求和。<br>当时好像是这么写了 Lambda x,y:x+y.<br>把这个写成一个函数就可以重复利用了，例：f = Lambda x,y:x+y  f(x,y)<br>当时有种发现新大陆的感觉，觉得python真是强大。<br>后来才发现java、C# …中也有Lambda表达式的概念<br>嗯哼，Lambda也是吊吊哒。</p>
<p>最近在学习响应式编程框架:Rxjava,扩展RxAndroid+Retrofit，还有一些大神们开发出来的Rxjava在Android中牛逼的框架。<br>RxJava其中有很多的Lambda表达式用来代码简化。感觉这种技能装逼又能减少代码量的神器真的是不可或缺啊，好了不多说废话现在先来入门一下Lambda表达式。</p>
<h4 id="一、Lambda简介"><a href="#一、Lambda简介" class="headerlink" title="一、Lambda简介"></a>一、Lambda简介</h4><p>Lambda 表达式　Lambda 表达式”是一个匿名函数，它可以包含表达式和语句，并且可用于创建委托或表达式目录树类型。<br>所有 Lambda 表达式都使用 Lambda 运算符 =&gt;；，该运算符读为“goes to”。该 Lambda 运算符的左边是输入参数（如果有），右边包含表达式或语句块。Lambda 表达式 x =&gt; x * x 读作“x goes to x times x”。</p>
<p>Lambda表达式的本质只是一个”语法糖”,由编译器推断并帮你转换包装为常规的代码,因此你可以使用更少的代码来实现同样的功能。本人建议不要乱用,因为这就和某些很高级的黑客写的代码一样,简洁,难懂,难以调试,维护人员想骂娘.<br>Lambda表达式是Java SE 8中一个重要的新特性。Lambda表达式允许你通过表达式来代替功能接口。 Lambda表达式就和方法一样,它提供了一个正常的参数列表和一个使用这些参数的主体(body,可以是一个表达式或一个代码块)。<br>Lambda表达式还增强了集合库。 Java SE 8添加了2个对集合数据进行批量操作的包: java.util.function 包以及 java.util.stream 包。 流(stream)就如同迭代器(iterator),但附加了许多额外的功能。 总的来说,Lambda表达式和 stream 是自Java语言添加泛型(Generics)和注解(annotation)以来最大的变化。 在本文中,我们将从简单到复杂的示例中见认识Lambda表达式和stream的强悍。</p>
<h4 id="二、为什么使用Lambda表达式？"><a href="#二、为什么使用Lambda表达式？" class="headerlink" title="二、为什么使用Lambda表达式？"></a>二、为什么使用Lambda表达式？</h4><p>   我们为什么需要Lambda表达式<br>   主要有三个原因：</p>
<blockquote>
<p>1.更加紧凑的代码<br>     比如Java中现有的匿名内部类以及监听器(listeners)和事件处理器(handlers）都显得很冗长<br>2.修改方法的能力（我个人理解为代码注入，或者有点类似JavaScript中传一个回调函数给另外一个函数）<br>     比如Collection接口的contains方法，当且仅当传入的元素真正包含在集合中，才返回true。而假如我们想对一个字符串集合，传入一个字符串，只要这个字符串出现在集合中（忽略大小写）就返回true。<br>     简单地说，我们想要的是传入“一些我们自己的代码”到已有的方法中，已有的方法将会执行我们传入的代码。Lambda表达式能很好地支持这点<br>3.更好地支持多核处理<br>     例如，通过Java 8新增的Lambda表达式，我们可以很方便地并行操作大集合，充分发挥多核CPU的潜能。<br>     并行处理函数如filter、map和reduce。</p>
</blockquote>
<h4 id="三、Lambda表达式的语法"><a href="#三、Lambda表达式的语法" class="headerlink" title="三、Lambda表达式的语法"></a>三、Lambda表达式的语法</h4><pre><code>基本语法:
(parameters) -&gt; expression
或
(parameters) -&gt;{ statements; }
</code></pre><p>下面是Java Lambda表达式的简单例子:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 1. 不需要参数,返回值为 5</span></div><div class="line">() -&gt; <span class="number">5</span></div><div class="line"></div><div class="line"><span class="comment">// 2. 接收一个参数(数字类型),返回其2倍的值</span></div><div class="line">x -&gt; <span class="number">2</span> * x</div><div class="line"></div><div class="line"><span class="comment">// 3. 接受2个参数(数字),并返回他们的差值</span></div><div class="line">(x, y) -&gt; x – y</div><div class="line"></div><div class="line"><span class="comment">// 4. 接收2个int型整数,返回他们的和</span></div><div class="line">(<span class="keyword">int</span> x, <span class="keyword">int</span> y) -&gt; x + y</div><div class="line"></div><div class="line"><span class="comment">// 5. 接受一个 string 对象,并在控制台打印,不返回任何值(看起来像是返回void)</span></div><div class="line">(String s) -&gt; System.out.print(s)</div></pre></td></tr></table></figure>
<p>好了，是不是对这种表达方式很感兴趣，让我们来看看开发需要准备的开发环境吧。</p>
<ul>
<li>JAVA8 (没有的话赶紧去装一个)</li>
<li>Eclipse 任意版本能运行java就行</li>
</ul>
<p>现在,我们已经知道什么是Lambda表达式，并且做好了前期准备，让我们先从一些基本的例子开始。 在本节中,我们将看到Lambda表达式如何影响我们编码的方式。 假设有一个玩家List，程序员可以使用 for 语句 (“for 循环”)来遍历,在Java SE 8中可以转换为另一种形式:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">String[] atp = &#123;<span class="string">"Rafael Nadal"</span>, <span class="string">"Novak Djokovic"</span>,</div><div class="line">       <span class="string">"Stanislas Wawrinka"</span>,</div><div class="line">       <span class="string">"David Ferrer"</span>,<span class="string">"Roger Federer"</span>,</div><div class="line">       <span class="string">"Andy Murray"</span>,<span class="string">"Tomas Berdych"</span>,</div><div class="line">       <span class="string">"Juan Martin Del Potro"</span>&#125;;</div><div class="line">List&lt;String&gt; players =  Arrays.asList(atp);</div><div class="line"></div><div class="line"><span class="comment">// 以前的循环方式</span></div><div class="line"><span class="keyword">for</span> (String player : players) &#123;</div><div class="line">     System.out.print(player + <span class="string">"; "</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 使用 Lambda 表达式以及函数操作(functional operation)</span></div><div class="line">players.forEach((player) -&gt; System.out.print(player + <span class="string">"; "</span>));</div><div class="line"></div><div class="line"><span class="comment">// 在 Java 8 中使用双冒号操作符(double colon operator)</span></div><div class="line">players.forEach(System.out::println);</div></pre></td></tr></table></figure>
<p>可以看到Lambda表达式可以将我们的代码缩减到一行。 另一个例子是在图形用户界面程序中,匿名类可以使用Lambda表达式来代替。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 使用匿名内部类</span></div><div class="line">btn.setOnAction(<span class="keyword">new</span> EventHandler&lt;ActionEvent&gt;() &#123;</div><div class="line">          <span class="meta">@Override</span></div><div class="line">          <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handle</span><span class="params">(ActionEvent event)</span> </span>&#123;</div><div class="line">              System.out.println(<span class="string">"Hello World!"</span>); </div><div class="line">          &#125;</div><div class="line">    &#125;);</div><div class="line"> </div><div class="line"><span class="comment">// 或者使用 Lambda expression</span></div><div class="line">btn.setOnAction(event -&gt; System.out.println(<span class="string">"Hello World!"</span>));</div></pre></td></tr></table></figure></p>
<p>下面是使用Lambdas 来实现 Runnable接口 的示例:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// 1.1使用匿名内部类</span></div><div class="line"><span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"Hello world !"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;).start();</div><div class="line"></div><div class="line"><span class="comment">// 1.2使用 Lambda expression</span></div><div class="line"><span class="keyword">new</span> Thread(() -&gt; System.out.println(<span class="string">"Hello world !"</span>)).start();</div><div class="line"></div><div class="line"><span class="comment">// 2.1使用匿名内部类</span></div><div class="line">Runnable race1 = <span class="keyword">new</span> Runnable() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"Hello world !"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 2.2使用 Lambda expression</span></div><div class="line">Runnable race2 = () -&gt; System.out.println(<span class="string">"Hello world !"</span>);</div><div class="line"> </div><div class="line"><span class="comment">// 直接调用 run 方法(没开新线程哦!)</span></div><div class="line">race1.run();</div><div class="line">race2.run();</div></pre></td></tr></table></figure></p>
<p>Runnable 的 Lambda表达式,使用块格式,将五行代码转换成单行语句。 接下来,在下一节中我们将使用Lambdas对集合进行排序。</p>
<h6 id="使用Lambdas排序集合"><a href="#使用Lambdas排序集合" class="headerlink" title="使用Lambdas排序集合"></a>使用Lambdas排序集合</h6><p>在Java中,Comparator 类被用来排序集合。 在下面的例子中,我们将根据球员的 name, surname, name 长度 以及最后一个字母。 和前面的示例一样,先使用匿名内部类来排序,然后再使用Lambda表达式精简我们的代码。<br>在第一个例子中,我们将根据name来排序list。 使用旧的方式,代码如下所示:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">String[] players = &#123;<span class="string">"Rafael Nadal"</span>, <span class="string">"Novak Djokovic"</span>, </div><div class="line">    <span class="string">"Stanislas Wawrinka"</span>, <span class="string">"David Ferrer"</span>,</div><div class="line">    <span class="string">"Roger Federer"</span>, <span class="string">"Andy Murray"</span>,</div><div class="line">    <span class="string">"Tomas Berdych"</span>, <span class="string">"Juan Martin Del Potro"</span>,</div><div class="line">    <span class="string">"Richard Gasquet"</span>, <span class="string">"John Isner"</span>&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// 1.1 使用匿名内部类根据 name 排序 players</span></div><div class="line">Arrays.sort(players, <span class="keyword">new</span> Comparator&lt;String&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(String s1, String s2)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> (s1.compareTo(s2));</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>使用lambdas,可以通过下面的代码实现同样的功能:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 1.2 使用 lambda expression 排序 players</span></div><div class="line">Comparator&lt;String&gt; sortByName = (String s1, String s2) -&gt; (s1.compareTo(s2));</div><div class="line">Arrays.sort(players, sortByName);</div><div class="line"></div><div class="line"><span class="comment">// 1.3 也可以采用如下形式:</span></div><div class="line">Arrays.sort(players, (String s1, String s2) -&gt; (s1.compareTo(s2)));</div></pre></td></tr></table></figure></p>
<p>其他的排序如下所示。 和上面的示例一样,代码分别通过匿名内部类和一些lambda表达式来实现Comparator :<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 1.1 使用匿名内部类根据 surname 排序 players</span></div><div class="line">Arrays.sort(players, <span class="keyword">new</span> Comparator&lt;String&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(String s1, String s2)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> (s1.substring(s1.indexOf(<span class="string">" "</span>)).compareTo(s2.substring(s2.indexOf(<span class="string">" "</span>))));</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// 1.2 使用 lambda expression 排序,根据 surname</span></div><div class="line">Comparator&lt;String&gt; sortBySurname = (String s1, String s2) -&gt; </div><div class="line">    ( s1.substring(s1.indexOf(<span class="string">" "</span>)).compareTo( s2.substring(s2.indexOf(<span class="string">" "</span>)) ) );</div><div class="line">Arrays.sort(players, sortBySurname);</div><div class="line"></div><div class="line"><span class="comment">// 1.3 或者这样,怀疑原作者是不是想错了,括号好多...</span></div><div class="line">Arrays.sort(players, (String s1, String s2) -&gt; </div><div class="line">      ( s1.substring(s1.indexOf(<span class="string">" "</span>)).compareTo( s2.substring(s2.indexOf(<span class="string">" "</span>)) ) ) </div><div class="line">    );</div><div class="line"></div><div class="line"><span class="comment">// 2.1 使用匿名内部类根据 name lenght 排序 players</span></div><div class="line">Arrays.sort(players, <span class="keyword">new</span> Comparator&lt;String&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(String s1, String s2)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> (s1.length() - s2.length());</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// 2.2 使用 lambda expression 排序,根据 name lenght</span></div><div class="line">Comparator&lt;String&gt; sortByNameLenght = (String s1, String s2) -&gt; (s1.length() - s2.length());</div><div class="line">Arrays.sort(players, sortByNameLenght);</div><div class="line"></div><div class="line"><span class="comment">// 2.3 or this</span></div><div class="line">Arrays.sort(players, (String s1, String s2) -&gt; (s1.length() - s2.length()));</div><div class="line"></div><div class="line"><span class="comment">// 3.1 使用匿名内部类排序 players, 根据最后一个字母</span></div><div class="line">Arrays.sort(players, <span class="keyword">new</span> Comparator&lt;String&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(String s1, String s2)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> (s1.charAt(s1.length() - <span class="number">1</span>) - s2.charAt(s2.length() - <span class="number">1</span>));</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// 3.2 使用 lambda expression 排序,根据最后一个字母</span></div><div class="line">Comparator&lt;String&gt; sortByLastLetter = </div><div class="line">    (String s1, String s2) -&gt; (s1.charAt(s1.length() - <span class="number">1</span>) - s2.charAt(s2.length() - <span class="number">1</span>));</div><div class="line">Arrays.sort(players, sortByLastLetter);</div><div class="line"></div><div class="line"><span class="comment">// 3.3 or this</span></div><div class="line">Arrays.sort(players, (String s1, String s2) -&gt; (s1.charAt(s1.length() - <span class="number">1</span>) - s2.charAt(s2.length() - <span class="number">1</span>)));</div></pre></td></tr></table></figure></p>
<p>就是这样,简洁又直观。 在下一节中我们将探索更多lambdas的能力,并将其与 stream 结合起来使用。</p>
<h6 id="使用Lambdas和Streams"><a href="#使用Lambdas和Streams" class="headerlink" title="使用Lambdas和Streams"></a>使用Lambdas和Streams</h6><p>Stream是对集合的包装,通常和lambda一起使用。 使用lambdas可以支持许多操作,如 map, filter, limit, sorted, count, min, max, sum, collect 等等。 同样,Stream使用懒运算,他们并不会真正地读取所有数据,遇到像getFirst() 这样的方法就会结束链式语法。 在接下来的例子中,我们将探索lambdas和streams 能做什么。 我们创建了一个Person类并使用这个类来添加一些数据到list中,将用于进一步流操作。 Person 只是一个简单的MODEL类:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line"></div><div class="line"><span class="keyword">private</span> String firstName, lastName, job, gender;</div><div class="line"><span class="keyword">private</span> <span class="keyword">int</span> salary, age;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String firstName, String lastName, String job,</span></span></div><div class="line">                String gender, <span class="keyword">int</span> age, <span class="keyword">int</span> salary)       &#123;</div><div class="line">          <span class="keyword">this</span>.firstName = firstName;</div><div class="line">          <span class="keyword">this</span>.lastName = lastName;</div><div class="line">          <span class="keyword">this</span>.gender = gender;</div><div class="line">          <span class="keyword">this</span>.age = age;</div><div class="line">          <span class="keyword">this</span>.job = job;</div><div class="line">          <span class="keyword">this</span>.salary = salary;</div><div class="line">&#125;</div><div class="line"><span class="comment">// Getter and Setter </span></div><div class="line"><span class="comment">// . . . . .</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>接下来,我们将创建两个list,都用来存放Person对象:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">List&lt;Person&gt; javaProgrammers = <span class="keyword">new</span> ArrayList&lt;Person&gt;() &#123;</div><div class="line">  &#123;</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Elsdon"</span>, <span class="string">"Jaycob"</span>, <span class="string">"Java programmer"</span>, <span class="string">"male"</span>, <span class="number">43</span>, <span class="number">2000</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Tamsen"</span>, <span class="string">"Brittany"</span>, <span class="string">"Java programmer"</span>, <span class="string">"female"</span>, <span class="number">23</span>, <span class="number">1500</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Floyd"</span>, <span class="string">"Donny"</span>, <span class="string">"Java programmer"</span>, <span class="string">"male"</span>, <span class="number">33</span>, <span class="number">1800</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Sindy"</span>, <span class="string">"Jonie"</span>, <span class="string">"Java programmer"</span>, <span class="string">"female"</span>, <span class="number">32</span>, <span class="number">1600</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Vere"</span>, <span class="string">"Hervey"</span>, <span class="string">"Java programmer"</span>, <span class="string">"male"</span>, <span class="number">22</span>, <span class="number">1200</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Maude"</span>, <span class="string">"Jaimie"</span>, <span class="string">"Java programmer"</span>, <span class="string">"female"</span>, <span class="number">27</span>, <span class="number">1900</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Shawn"</span>, <span class="string">"Randall"</span>, <span class="string">"Java programmer"</span>, <span class="string">"male"</span>, <span class="number">30</span>, <span class="number">2300</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Jayden"</span>, <span class="string">"Corrina"</span>, <span class="string">"Java programmer"</span>, <span class="string">"female"</span>, <span class="number">35</span>, <span class="number">1700</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Palmer"</span>, <span class="string">"Dene"</span>, <span class="string">"Java programmer"</span>, <span class="string">"male"</span>, <span class="number">33</span>, <span class="number">2000</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Addison"</span>, <span class="string">"Pam"</span>, <span class="string">"Java programmer"</span>, <span class="string">"female"</span>, <span class="number">34</span>, <span class="number">1300</span>));</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">List&lt;Person&gt; phpProgrammers = <span class="keyword">new</span> ArrayList&lt;Person&gt;() &#123;</div><div class="line">  &#123;</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Jarrod"</span>, <span class="string">"Pace"</span>, <span class="string">"PHP programmer"</span>, <span class="string">"male"</span>, <span class="number">34</span>, <span class="number">1550</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Clarette"</span>, <span class="string">"Cicely"</span>, <span class="string">"PHP programmer"</span>, <span class="string">"female"</span>, <span class="number">23</span>, <span class="number">1200</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Victor"</span>, <span class="string">"Channing"</span>, <span class="string">"PHP programmer"</span>, <span class="string">"male"</span>, <span class="number">32</span>, <span class="number">1600</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Tori"</span>, <span class="string">"Sheryl"</span>, <span class="string">"PHP programmer"</span>, <span class="string">"female"</span>, <span class="number">21</span>, <span class="number">1000</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Osborne"</span>, <span class="string">"Shad"</span>, <span class="string">"PHP programmer"</span>, <span class="string">"male"</span>, <span class="number">32</span>, <span class="number">1100</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Rosalind"</span>, <span class="string">"Layla"</span>, <span class="string">"PHP programmer"</span>, <span class="string">"female"</span>, <span class="number">25</span>, <span class="number">1300</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Fraser"</span>, <span class="string">"Hewie"</span>, <span class="string">"PHP programmer"</span>, <span class="string">"male"</span>, <span class="number">36</span>, <span class="number">1100</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Quinn"</span>, <span class="string">"Tamara"</span>, <span class="string">"PHP programmer"</span>, <span class="string">"female"</span>, <span class="number">21</span>, <span class="number">1000</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Alvin"</span>, <span class="string">"Lance"</span>, <span class="string">"PHP programmer"</span>, <span class="string">"male"</span>, <span class="number">38</span>, <span class="number">1600</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Evonne"</span>, <span class="string">"Shari"</span>, <span class="string">"PHP programmer"</span>, <span class="string">"female"</span>, <span class="number">40</span>, <span class="number">1800</span>));</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>现在我们使用forEach方法来迭代输出上述列表:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">System.out.println(<span class="string">"所有程序员的姓名:"</span>);</div><div class="line">javaProgrammers.forEach((p) -&gt; System.out.printf(<span class="string">"%s %s; "</span>, p.getFirstName(), p.getLastName()));</div><div class="line">phpProgrammers.forEach((p) -&gt; System.out.printf(<span class="string">"%s %s; "</span>, p.getFirstName(), p.getLastName()));</div></pre></td></tr></table></figure></p>
<p>我们同样使用forEach方法,增加程序员的工资5%:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">System.out.println(<span class="string">"给程序员加薪 5% :"</span>);</div><div class="line">Consumer&lt;Person&gt; giveRaise = e -&gt; e.setSalary(e.getSalary() / <span class="number">100</span> * <span class="number">5</span> + e.getSalary());</div><div class="line"></div><div class="line">javaProgrammers.forEach(giveRaise);</div><div class="line">phpProgrammers.forEach(giveRaise);</div></pre></td></tr></table></figure></p>
<p>另一个有用的方法是过滤器filter() ,让我们显示月薪超过1400美元的PHP程序员:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">System.out.println(<span class="string">"下面是月薪超过 $1,400 的PHP程序员:"</span>)</div><div class="line">phpProgrammers.stream()</div><div class="line">          .filter((p) -&gt; (p.getSalary() &gt; <span class="number">1400</span>))</div><div class="line">          .forEach((p) -&gt; System.out.printf(<span class="string">"%s %s; "</span>, p.getFirstName(), p.getLastName()));</div></pre></td></tr></table></figure></p>
<p>我们也可以定义过滤器,然后重用它们来执行其他操作:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// 定义 filters</span></div><div class="line">Predicate&lt;Person&gt; ageFilter = (p) -&gt; (p.getAge() &gt; <span class="number">25</span>);</div><div class="line">Predicate&lt;Person&gt; salaryFilter = (p) -&gt; (p.getSalary() &gt; <span class="number">1400</span>);</div><div class="line">Predicate&lt;Person&gt; genderFilter = (p) -&gt; (<span class="string">"female"</span>.equals(p.getGender()));</div><div class="line"></div><div class="line">System.out.println(<span class="string">"下面是年龄大于 24岁且月薪在$1,400以上的女PHP程序员:"</span>);</div><div class="line">phpProgrammers.stream()</div><div class="line">          .filter(ageFilter)</div><div class="line">          .filter(salaryFilter)</div><div class="line">          .filter(genderFilter)</div><div class="line">          .forEach((p) -&gt; System.out.printf(<span class="string">"%s %s; "</span>, p.getFirstName(), p.getLastName()));</div><div class="line"></div><div class="line"><span class="comment">// 重用filters</span></div><div class="line">System.out.println(<span class="string">"年龄大于 24岁的女性 Java programmers:"</span>);</div><div class="line">javaProgrammers.stream()</div><div class="line">          .filter(ageFilter)</div><div class="line">          .filter(genderFilter)</div><div class="line">          .forEach((p) -&gt; System.out.printf(<span class="string">"%s %s; "</span>, p.getFirstName(), p.getLastName()));</div></pre></td></tr></table></figure></p>
<p>使用limit方法,可以限制结果集的个数:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">System.out.println(<span class="string">"最前面的3个 Java programmers:"</span>);</div><div class="line">javaProgrammers.stream()</div><div class="line">          .limit(<span class="number">3</span>)</div><div class="line">          .forEach((p) -&gt; System.out.printf(<span class="string">"%s %s; "</span>, p.getFirstName(), p.getLastName()));</div><div class="line"></div><div class="line"></div><div class="line">System.out.println(<span class="string">"最前面的3个女性 Java programmers:"</span>);</div><div class="line">javaProgrammers.stream()</div><div class="line">          .filter(genderFilter)</div><div class="line">          .limit(<span class="number">3</span>)</div><div class="line">          .forEach((p) -&gt; System.out.printf(<span class="string">"%s %s; "</span>, p.getFirstName(), p.getLastName()));</div></pre></td></tr></table></figure></p>
<p>排序呢? 我们在stream中能处理吗? 答案是肯定的。 在下面的例子中,我们将根据名字和薪水排序Java程序员,放到一个list中,然后显示列表:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">System.out.println(<span class="string">"根据 name 排序,并显示前5个 Java programmers:"</span>);</div><div class="line">List&lt;Person&gt; sortedJavaProgrammers = javaProgrammers</div><div class="line">          .stream()</div><div class="line">          .sorted((p, p2) -&gt; (p.getFirstName().compareTo(p2.getFirstName())))</div><div class="line">          .limit(<span class="number">5</span>)</div><div class="line">          .collect(toList());</div><div class="line"></div><div class="line">sortedJavaProgrammers.forEach((p) -&gt; System.out.printf(<span class="string">"%s %s; %n"</span>, p.getFirstName(), p.getLastName()));</div><div class="line"> </div><div class="line">System.out.println(<span class="string">"根据 salary 排序 Java programmers:"</span>);</div><div class="line">sortedJavaProgrammers = javaProgrammers</div><div class="line">          .stream()</div><div class="line">          .sorted( (p, p2) -&gt; (p.getSalary() - p2.getSalary()) )</div><div class="line">          .collect( toList() );</div><div class="line"></div><div class="line">sortedJavaProgrammers.forEach((p) -&gt; System.out.printf(<span class="string">"%s %s; %n"</span>, p.getFirstName(), p.getLastName()));</div></pre></td></tr></table></figure></p>
<p>如果我们只对最低和最高的薪水感兴趣,比排序后选择第一个/最后一个 更快的是min和max方法:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">System.out.println(<span class="string">"工资最低的 Java programmer:"</span>);</div><div class="line">Person pers = javaProgrammers</div><div class="line">          .stream()</div><div class="line">          .min((p1, p2) -&gt; (p1.getSalary() - p2.getSalary()))</div><div class="line">          .get()</div><div class="line"></div><div class="line">System.out.printf(<span class="string">"Name: %s %s; Salary: $%,d."</span>, pers.getFirstName(), pers.getLastName(), pers.getSalary())</div><div class="line"></div><div class="line">System.out.println(<span class="string">"工资最高的 Java programmer:"</span>);</div><div class="line">Person person = javaProgrammers</div><div class="line">          .stream()</div><div class="line">          .max((p, p2) -&gt; (p.getSalary() - p2.getSalary()))</div><div class="line">          .get()</div><div class="line"></div><div class="line">System.out.printf(<span class="string">"Name: %s %s; Salary: $%,d."</span>, person.getFirstName(), person.getLastName(), person.getSalary())</div></pre></td></tr></table></figure></p>
<p>上面的例子中我们已经看到 collect 方法是如何工作的。 结合 map 方法,我们可以使用 collect 方法来将我们的结果集放到一个字符串,一个 Set 或一个TreeSet中:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">System.out.println(<span class="string">"将 PHP programmers 的 first name 拼接成字符串:"</span>);</div><div class="line">String phpDevelopers = phpProgrammers</div><div class="line">          .stream()</div><div class="line">          .map(Person::getFirstName)</div><div class="line">          .collect(joining(<span class="string">" ; "</span>)); <span class="comment">// 在进一步的操作中可以作为标记(token)   </span></div><div class="line"></div><div class="line">System.out.println(<span class="string">"将 Java programmers 的 first name 存放到 Set:"</span>);</div><div class="line">Set&lt;String&gt; javaDevFirstName = javaProgrammers</div><div class="line">          .stream()</div><div class="line">          .map(Person::getFirstName)</div><div class="line">          .collect(toSet());</div><div class="line"></div><div class="line">System.out.println(<span class="string">"将 Java programmers 的 first name 存放到 TreeSet:"</span>);</div><div class="line">TreeSet&lt;String&gt; javaDevLastName = javaProgrammers</div><div class="line">          .stream()</div><div class="line">          .map(Person::getLastName)</div><div class="line">          .collect(toCollection(TreeSet::<span class="keyword">new</span>));</div></pre></td></tr></table></figure></p>
<p>Streams 还可以是并行的(parallel)。 示例如下:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">System.out.println(<span class="string">"计算付给 Java programmers 的所有money:"</span>);</div><div class="line"><span class="keyword">int</span> totalSalary = javaProgrammers</div><div class="line">          .parallelStream()</div><div class="line">          .mapToInt(p -&gt; p.getSalary())</div><div class="line">          .sum();</div></pre></td></tr></table></figure></p>
<p>我们可以使用summaryStatistics方法获得stream 中元素的各种汇总数据。 接下来,我们可以访问这些方法,比如getMax, getMin, getSum或getAverage:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//计算 count, min, max, sum, and average for numbers</span></div><div class="line">List&lt;Integer&gt; numbers = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>);</div><div class="line">IntSummaryStatistics stats = numbers</div><div class="line">          .stream()</div><div class="line">          .mapToInt((x) -&gt; x)</div><div class="line">          .summaryStatistics();</div><div class="line"></div><div class="line">System.out.println(<span class="string">"List中最大的数字 : "</span> + stats.getMax());</div><div class="line">System.out.println(<span class="string">"List中最小的数字 : "</span> + stats.getMin());</div><div class="line">System.out.println(<span class="string">"所有数字的总和   : "</span> + stats.getSum());</div><div class="line">System.out.println(<span class="string">"所有数字的平均值 : "</span> + stats.getAverage());</div></pre></td></tr></table></figure></p>
<p>OK,就是酱,就是这么吊，希望你喜欢!</p>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><pre><code>在本文中,我们学会了使用lambda表达式的不同方式,从基本的示例,到使用lambdas和streams的复杂示例。 此外,我们还学习了如何使用lambda表达式与Comparator 类来对Java集合进行排序。
</code></pre><p><strong><em>By Xiaolong：没有伞的孩子必须努力奔跑！</em></strong></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://rngift.com/2016/06/01/Reptile3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小龙">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/lucky.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xiaolong的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/01/Reptile3/" itemprop="url">
                  java爬虫教程：模拟用户表单登录
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-06-01T20:56:04+08:00">
                2016-06-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这个是爬虫教程第三篇，教大家如何模拟用户表单登录。</p>
<p>前期准备：</p>
<ul>
<li>JSOUP 1.83 jar包</li>
<li>Eclipse 任意版本能运行java就行</li>
<li>谷歌浏览器</li>
</ul>
<h5 id="第一步：依然是分析页面结构"><a href="#第一步：依然是分析页面结构" class="headerlink" title="第一步：依然是分析页面结构"></a>第一步：依然是分析页面结构</h5><p>我们要模拟CSDN用户表单登录，来获取用户登录后的数据。<br>在一些网站和论坛，部分内容总是需要会员用户等需要一定权限的用户才能看得到。<br>好了由此可见模拟用户表单登录的重要性了。</p>
<p>进入<a href="https://passport.csdn.net/account/login" target="_blank" rel="external">登录页</a>，在页面上按F12查看页面元素的内容。<br><img src="http://img.my.csdn.net/uploads/201606/13/1465824740_6409.png" alt=""><br>这次我们只要form标签，和其内部的账号密码输入框信息。</p>
<h5 id="第二步：讲解一下Post需要的操作具体流程"><a href="#第二步：讲解一下Post需要的操作具体流程" class="headerlink" title="第二步：讲解一下Post需要的操作具体流程"></a>第二步：讲解一下Post需要的操作具体流程</h5><p>一般表单的id都是唯一的，所以要过滤出表单是很容易的一件事情<br>这里表单的id值是fm1<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">List&lt;Element&gt; et = d1.select(<span class="string">"#fm1"</span>);<span class="comment">// 获取form表单</span></div></pre></td></tr></table></figure></p>
<p>下一步是获得表单下面的帐号和密码输入框控件，同样可以根据id来过滤，不过这里使用的是name属性。<br>一般网站设计都会把name属性配上value，post到服务端。<br>直接在Map对象中put帐号和密码的键值对，代码如下<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Map&lt;String, String&gt; datas = <span class="keyword">new</span> HashMap&lt;&gt;();</div><div class="line">datas.put(e.attr(<span class="string">"name"</span>), e.attr(<span class="string">"value"</span>));</div></pre></td></tr></table></figure></p>
<p>这个就是表单的帐号密码输入框的键值<br>也可以不做遍历直接<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">datas.put(<span class="string">"username"</span>, <span class="string">"your username"</span>);</div><div class="line">datas.put(<span class="string">"password"</span>, <span class="string">"your password"</span>);</div></pre></td></tr></table></figure></p>
<p>哈哈，是不是少了许多。<br>经过这一步之后datas里已经存放了我们要post的数据了。<br>可以执行第二次请求将登录信息post上去了。<br>Response login = con2.ignoreContentType(true).method(Method.POST)<br>                .data(datas).cookies(rs.cookies()).execute();<br>携带登录的Map数据和第一次登录返回的cookie，进行post。</p>
<h5 id="第三步：开始写代码"><a href="#第三步：开始写代码" class="headerlink" title="第三步：开始写代码"></a>第三步：开始写代码</h5><p>好了就是这么简单。接下来看看代码吧。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.HashMap;</div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line"><span class="keyword">import</span> java.util.Map;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.jsoup.Connection;</div><div class="line"><span class="keyword">import</span> org.jsoup.Jsoup;</div><div class="line"><span class="keyword">import</span> org.jsoup.Connection.Method;</div><div class="line"><span class="keyword">import</span> org.jsoup.Connection.Response;</div><div class="line"><span class="keyword">import</span> org.jsoup.nodes.Document;</div><div class="line"><span class="keyword">import</span> org.jsoup.nodes.Element;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 使用Jsoup模拟登陆CSDN</div><div class="line"> * </div><div class="line"> * </div><div class="line"> * 大体思路如下:</div><div class="line"> * </div><div class="line"> * 第一次请求登陆页面，获取页面信息，包含表单信息，和cookie（这个很重要），拿不到，会模拟登陆不上</div><div class="line"> * </div><div class="line"> * </div><div class="line"> * 第二次登陆，设置用户名，密码，把第一次的cooking，放进去，即可</div><div class="line"> * </div><div class="line"> * 怎么确定是否登陆成功？</div><div class="line"> * </div><div class="line"> * 登陆后，打印页面，会看到账户的详细信息。</div><div class="line"> * </div><div class="line"> * </div><div class="line"> * <span class="doctag">@date</span> 2016年6月13日</div><div class="line"> * <span class="doctag">@author</span> xiaolong</div><div class="line"> * </div><div class="line"> * </div><div class="line"> * **/</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginDemo</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line"></div><div class="line">		LoginDemo loginDemo = <span class="keyword">new</span> LoginDemo();</div><div class="line">		loginDemo.login(<span class="string">"your account"</span>, <span class="string">"password"</span>);<span class="comment">// 输入CSDN的用户名，和密码</span></div><div class="line"></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 模拟登陆CSDN</div><div class="line">	 * </div><div class="line">	 * <span class="doctag">@param</span> userName</div><div class="line">	 *            用户名</div><div class="line">	 * <span class="doctag">@param</span> pwd</div><div class="line">	 *            密码</div><div class="line">	 * </div><div class="line">	 * **/</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">login</span><span class="params">(String userName, String pwd)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line"></div><div class="line">		<span class="comment">// 第一次请求</span></div><div class="line">		Connection con = Jsoup</div><div class="line">				.connect(<span class="string">"https://passport.csdn.net/account/login"</span>);<span class="comment">// 获取连接</span></div><div class="line">		con.header(<span class="string">"User-Agent"</span>,</div><div class="line">				<span class="string">"Mozilla/5.0 (Windows NT 6.1; WOW64; rv:29.0) Gecko/20100101 Firefox/29.0"</span>);<span class="comment">// 配置模拟浏览器</span></div><div class="line">		Response rs = con.execute();<span class="comment">// 获取响应</span></div><div class="line">		Document d1 = Jsoup.parse(rs.body());<span class="comment">// 转换为Dom树</span></div><div class="line">		List&lt;Element&gt; et = d1.select(<span class="string">"#fm1"</span>);<span class="comment">// 获取form表单，可以通过查看页面源码代码得知</span></div><div class="line"></div><div class="line">		<span class="comment">// 获取，cooking和表单属性，下面map存放post时的数据</span></div><div class="line">		Map&lt;String, String&gt; datas = <span class="keyword">new</span> HashMap&lt;&gt;();</div><div class="line">		<span class="keyword">for</span> (Element e : et.get(<span class="number">0</span>).getAllElements()) &#123;</div><div class="line">			<span class="keyword">if</span> (e.attr(<span class="string">"name"</span>).equals(<span class="string">"username"</span>)) &#123;</div><div class="line">				e.attr(<span class="string">"value"</span>, userName);<span class="comment">// 设置用户名</span></div><div class="line">			&#125;</div><div class="line"></div><div class="line">			<span class="keyword">if</span> (e.attr(<span class="string">"name"</span>).equals(<span class="string">"password"</span>)) &#123;</div><div class="line">				e.attr(<span class="string">"value"</span>, pwd); <span class="comment">// 设置用户密码</span></div><div class="line">			&#125;</div><div class="line"></div><div class="line">			<span class="keyword">if</span> (e.attr(<span class="string">"name"</span>).length() &gt; <span class="number">0</span>) &#123;<span class="comment">// 排除空值表单属性</span></div><div class="line">				datas.put(e.attr(<span class="string">"name"</span>), e.attr(<span class="string">"value"</span>));</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="comment">/**</span></div><div class="line">		 * 第二次请求，post表单数据，以及cookie信息</div><div class="line">		 * </div><div class="line">		 * **/</div><div class="line">		Connection con2 = Jsoup</div><div class="line">				.connect(<span class="string">"https://passport.csdn.net/account/login"</span>);</div><div class="line">		con2.header(<span class="string">"User-Agent"</span>,</div><div class="line">				<span class="string">"Mozilla/5.0 (Windows NT 6.1; WOW64; rv:29.0) Gecko/20100101 Firefox/29.0"</span>);</div><div class="line">		<span class="comment">// 设置cookie和post上面的map数据</span></div><div class="line">		Response login = con2.ignoreContentType(<span class="keyword">true</span>).method(Method.POST)</div><div class="line">				.data(datas).cookies(rs.cookies()).execute();</div><div class="line">		<span class="comment">// 打印，登陆成功后的信息</span></div><div class="line">		System.out.println(login.body());</div><div class="line"></div><div class="line">		<span class="comment">// 登陆成功后的cookie信息，可以保存到本地，以后登陆时，只需一次登陆即可</span></div><div class="line">		Map&lt;String, String&gt; map = login.cookies();</div><div class="line">		<span class="keyword">for</span> (String s : map.keySet()) &#123;</div><div class="line">			System.out.println(s + <span class="string">"      "</span> + map.get(s));</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><pre><code>这个类中写了两次网站访问的请求
第一次请求用来获取cookie信息
第二次请求将携带cookie和登录数据的信息post出去用来模拟登录。
就是这么简单~~~

小Tips:
想要模拟用户表单登录，链接头信息是不可少的，&quot;User-Agent&quot;代表的是浏览器访问信息。
通过下图可以看到请求头可以有这么多的信息，
服务端可能会通过约束请求头来判别用户post/get的信息是否合法
所以请求头很重要~请求头很重要~请求头很重要~（重要的事情说三遍）
</code></pre><p><img src="http://img.my.csdn.net/uploads/201606/13/1465827533_1458.png" alt=""></p>
<pre><code>这个是登录后每一次操作都需要携带的头部信息。可以通过F12查看页面网络访问状态来查看请求头和返回头。
好啦，有了模拟表单登录了，是时候去大展身手了。
爬虫教程到此结束，希望有兴趣的小伙伴可以继续深入研究
</code></pre><p><strong><em>By Xiaolong：You have a dream,you got to protect it! </em></strong></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://rngift.com/2016/05/08/Reptile2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小龙">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/lucky.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xiaolong的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/08/Reptile2/" itemprop="url">
                  java爬虫教程：爬取CSDN博客文章
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-05-08T22:30:56+08:00">
                2016-05-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这个是爬虫教程第二篇，教大家如何爬取普通页面的内容。</p>
<p>前期准备：</p>
<ul>
<li>JSOUP 1.83 jar包</li>
<li>Eclipse 任意版本能运行java就行</li>
<li>谷歌浏览器</li>
</ul>
<h5 id="第一步：分析页面结构"><a href="#第一步：分析页面结构" class="headerlink" title="第一步：分析页面结构"></a>第一步：分析页面结构</h5><p>我们要爬CSDN博客文章，直接访问某个人的CSDN博客主页，比如说我的CSDN主页：<a href="http://blog.csdn.net/guoxiaolongonly" target="_blank" rel="external">http://blog.csdn.net/guoxiaolongonly</a><br>进入主页，在页面上按F12查看标签的内容。<br><img src="http://img.blog.csdn.net/20160525125951156?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br>可以看到如上内容，基本的html就是js+css+html标签的构造，我们使用比较多的是a、img这两个元素下的内容。第一个是链接的元素，通常获取这个来实现往后的链接的跳转。第二个是图片元素，有时候需要爬图片链接来下载图片就爬这个Tag来过滤。里面的内容也都是一个链接地址。</p>
<h5 id="第二步：选取合适的过滤方法"><a href="#第二步：选取合适的过滤方法" class="headerlink" title="第二步：选取合适的过滤方法"></a>第二步：选取合适的过滤方法</h5><p>我现在想要爬的就是这个标题中的链接。<br><img src="http://img.blog.csdn.net/20160525130008173?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p>
<p>这个标签里href属性放了我想要访问的文章详情的链接</p>
<pre><code>可以使用Jsoup的方法：Elements elements = doc.getElementsByTag(&quot;a&quot;);//找到所有a标签
对a标签进行过滤就行了
也可以直接获取class标签下的内容，再在这个class下找到a标签获取a标签的href属性值。
如：Element elementTitle = document.getElementsByClass(&quot;link_title&quot;).first();//标题。
这样只需要再找到这个elementTitle下的a元素就好了。
</code></pre><p>当然JSOUP过滤标签的方式很多，可以根据需要选择合适的方法来过滤。</p>
<h5 id="第三步：开始写代码"><a href="#第三步：开始写代码" class="headerlink" title="第三步：开始写代码"></a>第三步：开始写代码</h5><p>好了就是这么简单。接下来看看代码吧。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.BufferedWriter;</div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.FileWriter;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.jsoup.Jsoup;</div><div class="line"><span class="keyword">import</span> org.jsoup.nodes.Document;</div><div class="line"><span class="keyword">import</span> org.jsoup.nodes.Element;</div><div class="line"><span class="keyword">import</span> org.jsoup.select.Elements;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MySearchTest</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> String url = <span class="string">"http://blog.csdn.net"</span>;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> String blogName = <span class="string">"guoxiaolongonly"</span>;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		getArticleListFromUrl(url+<span class="string">"/"</span> + blogName);</div><div class="line">	&#125;</div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 获取文章列表</div><div class="line">	 * <span class="doctag">@param</span> listurl</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getArticleListFromUrl</span><span class="params">(String listurl)</span> </span>&#123;</div><div class="line">		Document doc = <span class="keyword">null</span>;</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			doc = Jsoup.connect(listurl).userAgent(<span class="string">"Mozilla/5.0"</span>).timeout(<span class="number">3000</span>).post();</div><div class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">		<span class="comment">// System.out.println(doc);</span></div><div class="line">		Elements elements = doc.getElementsByTag(<span class="string">"a"</span>);<span class="comment">//找到所有a标签</span></div><div class="line">		<span class="keyword">for</span> (Element element : elements) &#123;</div><div class="line">			String relHref = element.attr(<span class="string">"href"</span>); <span class="comment">// == "/"这个是href的属性值，一般都是链接。这里放的是文章的连接</span></div><div class="line">			String linkHref = element.text();</div><div class="line">			 <span class="comment">//用if语句过滤掉不是文章链接的内容。因为文章的链接有两个，但评论的链接只有一个，反正指向相同的页面就拿评论的链接来用吧</span></div><div class="line">			<span class="keyword">if</span> (!relHref.startsWith(<span class="string">"http://"</span>) &amp;&amp; relHref.contains(<span class="string">"details"</span>) &amp;&amp; relHref.endsWith(<span class="string">"comments"</span>))</div><div class="line">			&#123;</div><div class="line">				StringBuffer sb = <span class="keyword">new</span> StringBuffer();</div><div class="line">				sb.append(url).append(relHref);</div><div class="line">				System.out.println(sb.substring(<span class="number">0</span>, sb.length() - <span class="number">9</span>));<span class="comment">//去掉最后的#comment输出</span></div><div class="line">				getArticleFromUrl(sb.substring(<span class="number">0</span>, sb.length() - <span class="number">9</span>));<span class="comment">//可以通过这个url获取文章了</span></div><div class="line">			&#125;</div><div class="line"><span class="comment">//			System.out.println(linkHref);</span></div><div class="line">			<span class="keyword">if</span>(linkHref.equals(<span class="string">"下一页"</span>))<span class="comment">//如果有下一页</span></div><div class="line">			&#123;</div><div class="line">				getArticleListFromUrl(url + relHref);<span class="comment">//获取下一页的列表</span></div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 获取文章内容</div><div class="line">	 * <span class="doctag">@param</span> detailurl</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getArticleFromUrl</span><span class="params">(String detailurl)</span> </span>&#123;</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			Document document = Jsoup.connect(detailurl).userAgent(<span class="string">"Mozilla/5.0"</span>).timeout(<span class="number">3000</span>).post();</div><div class="line">			Element elementTitle = document.getElementsByClass(<span class="string">"link_title"</span>).first();<span class="comment">//标题。 这边根据class的内容来过滤</span></div><div class="line">			System.out.println(elementTitle.text());</div><div class="line">			String filename = elementTitle.text().replaceAll(<span class="string">"/"</span>, <span class="string">"或"</span>);</div><div class="line">			Element elementContent = document.getElementsByClass(<span class="string">"article_content"</span>).first();<span class="comment">//内容。</span></div><div class="line">			saveArticle(filename , elementContent.text(), blogName);</div><div class="line">			<span class="comment">// String Content =elementContent.te  xt().replaceAll(" ", "\t");</span></div><div class="line">			<span class="comment">// System.out.println(elementContent.text()+"\n");</span></div><div class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">			<span class="comment">// TODO Auto-generated catch block</span></div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line"></div><div class="line">	&#125;</div><div class="line">    </div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 保存文章到本地</div><div class="line">	 * <span class="doctag">@param</span> titile</div><div class="line">	 * <span class="doctag">@param</span> content</div><div class="line">	 * <span class="doctag">@param</span> blogName</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">saveArticle</span><span class="params">(String titile, String content, String blogName)</span> </span>&#123;</div><div class="line">		String lujing = <span class="string">"d:\\MyLoadArticle\\"</span> + blogName + <span class="string">"\\"</span> + titile + <span class="string">".txt"</span>;<span class="comment">//保存到本地的路径和文件名</span></div><div class="line">		File file = <span class="keyword">new</span> File(lujing);</div><div class="line">		<span class="keyword">if</span> (!file.getParentFile().exists()) &#123;</div><div class="line">			file.getParentFile().mkdirs();</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			file.createNewFile();</div><div class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			FileWriter fw = <span class="keyword">new</span> FileWriter(file, <span class="keyword">true</span>);</div><div class="line">			BufferedWriter bw = <span class="keyword">new</span> BufferedWriter(fw);</div><div class="line">			bw.write(content);</div><div class="line">			bw.flush();</div><div class="line">			bw.close();</div><div class="line">			fw.close();</div><div class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line"></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><pre><code>这个类中我封装了获取文章列表、获取文章内容保存文章内容的方法。
首先解析首页获取首列表页中每个文章的链接，再依次访问每个链接爬取文章标题和内容。
如果列表页存在下一页。再对下一页列表进行相同的操作，是不是很好理解了。
文章保存格式为txt文本，保存的路径根据博客名来命名，保存的文件名称为文章标题，文本则保存文章内容。
有这个demo是不是可以写出文章搜索器啊，文章过滤器...甚至爬取整个csdnblog的所有文章都不是问题。就看你方法和过滤怎么做了。
大家可以设置blogName去爬你想要的文章了，比如说我：guoxiaolongonly
这边用post模拟浏览器请求。因为直接get，页面无法加载。
针对文本保存文档编码乱码问题。还希望大家自己研究一下。
好运~~ 晚安~
</code></pre><p><strong><em>By Xiaolong：You have a dream,you got to protect it! </em></strong></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://rngift.com/2016/05/06/Reptile1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小龙">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/lucky.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xiaolong的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/06/Reptile1/" itemprop="url">
                  java爬虫教程：JSOUP
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-05-06T22:53:53+08:00">
                2016-05-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>爬虫教程第一篇，认识强大的java包JSOUP。<br>接下来我来介绍一下Java爬虫，(ˉ﹃ˉ)我大Java依然这么强大，谁还敢鄙视我大Java~</p>
<p>嗯哼，刚刚说Java强大，其实Java强大在它的第三方库。每一个jar包都是某个Java开发者的劳动成果，当然每一个Java开发者都应该自豪，因为正是我们的付出让Java日益强大。接下来要讲的是一个非常强大的工具包<a href="http://www.huqiwen.com/2012/05/03/use-jsoup-analytics-html-document/#" target="_blank" rel="external">JSOUP</a>，java爬虫实现基本依赖于它！</p>
<h3 id="一、Jsoup简介"><a href="#一、Jsoup简介" class="headerlink" title="一、Jsoup简介"></a>一、Jsoup简介</h3><p>在以往用java来处理解析HTML文档或者片段时，我们通常会采用<a href="http://htmlparser.sourceforge.net" target="_blank" rel="external">htmlparser</a>这个开源类库。现在我们有了JSOUP，以后的处理HTML的内容只需要使用JSOUP就已经足够了，JSOUP有更快的更新，更方便的API等。<br>jsoup 是一款 Java 的HTML 解析器，可直接解析某个URL地址、HTML文本内容。它提供了一套非常省力的API，可通过DOM，CSS以及类似于jQuery的操作方法来取出和操作数据，可以看作是java版的jQuery。<br>jsoup的主要功能如下：<br>从一个URL，文件或字符串中解析HTML；<br>使用DOM或CSS选择器来查找、取出数据；<br>可操作HTML元素、属性、文本；<br>jsoup是基于MIT协议发布的，可放心使用于商业项目。官方网站：<a href="http://jsoup.org/" target="_blank" rel="external">http://jsoup.org/</a></p>
<h3 id="二、解析遍历HTML文档"><a href="#二、解析遍历HTML文档" class="headerlink" title="二、解析遍历HTML文档"></a>二、解析遍历HTML文档</h3><p>Jsoup处理HTML文件是，是将用户输入的HTML文档，解析转换成一个Document对象进行处理。Jsoup一般支持以下几种来源内容的转换。</p>
<pre><code>1. 解析一个html字符串
2. 解析一个body片段
3. 根据一个url地址加载Document对象
4. 根据一个文件加载Document对象
</code></pre><h4 id="1-解析一个html字符串"><a href="#1-解析一个html字符串" class="headerlink" title="1.解析一个html字符串"></a>1.解析一个html字符串</h4><p>在处理一个html字符串。我们可能需要对其进行解析，并提取其内容，或校验其格式是否完整，或者想修改它。Jsoup可以帮助我们轻松的解决这些问题。<br>在Jsoup中有一个这样的静态方法Jsoup.parse(String html)，可以将我们的html片段转换成Document对象。示例如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">String html = <span class="string">"&lt;div&gt;&lt;p align=\"center\"&gt;&lt;img alt=\"\" width=\"660\" height=\"852\" src=\"/erp/UserFiles/Image/51.jpg\" /&gt;这是P元素的内容&lt;/p&gt;"</span>;</div><div class="line">Document document = Jsoup.parse(html);</div></pre></td></tr></table></figure></p>
<p>使用上面的方法，就可以将html字符串，转换成Document对象，一旦有了Document对象，我们就可以使用其中适当的方法根据需求处理问题。我们可以看到这里转换的html片段并不是一个合法的html片段，里面的div标签没有闭合。这对于Jsoup来说不是问题，它可以很好的处理这类问题。</p>
<h4 id="2-解析body片段"><a href="#2-解析body片段" class="headerlink" title="2.解析body片段"></a>2.解析body片段</h4><p>假如我们现在有一个HTML片断 (比如. 一个 div 包含一对 p 标签; 一个不完整的HTML文档) 想对它进行解析。这个HTML片断可以是用户提交的一条评论或在一个CMS页面中编辑body部分。我们可以使用使用<a href="https://jsoup.org/apidocs/org/jsoup/Jsoup.html#parseBodyFragment(java.lang.String" target="_blank" rel="external">Jsoup.parseBodyFragment(String html)</a> 方法。<br>示例如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">String html = <span class="string">"&lt;div&gt;&lt;p align=\"center\"&gt;&lt;img alt=\"\" width=\"660\" height=\"852\" src=\"/erp/UserFiles/Image/51.jpg\" /&gt;这是P元素的内容&lt;/p&gt;"</span>;</div><div class="line">Document document = Jsoup.parseBodyFragment(html);</div></pre></td></tr></table></figure></p>
<p>看到这里可能会有疑问，这个和上面的html片段是一样的嘛。没错是一样的，parseBodyFragment 方法创建一个空壳的文档，并插入解析过的HTML到body元素中。假如使用正常的 Jsoup.parse(String html) 方法，通常也可以得到相同的结果，但是明确将用户输入作为 body片段处理，以确保用户所提供的任何糟糕的HTML都将被解析成body元素。</p>
<p><a href="https://jsoup.org/apidocs/org/jsoup/nodes/Document.html#body(" target="_blank" rel="external">Document.body()</a> 方法能够取得文档body元素的所有子元素，与doc.getElementsByTag(“body”)相同。</p>
<h4 id="3-根据一个URL地址加载Document对象"><a href="#3-根据一个URL地址加载Document对象" class="headerlink" title="3.根据一个URL地址加载Document对象"></a>3.根据一个URL地址加载Document对象</h4><p>有时候我们可能希望通过一个url地址，然后提取里面的内容，转换成document对象。我们以前可能是使用http client等模拟一个请求，然后取得返回内容等，使用Jsoup方便简单的解决这个问题。示例如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Document document = Jsoup.connect(<span class="string">"http://www.baidu.com"</span>).get();</div><div class="line">String title = document.title();</div><div class="line">String text = document.text();</div></pre></td></tr></table></figure>
<p><a href="https://jsoup.org/apidocs/org/jsoup/Jsoup.html#connect(java.lang.String" target="_blank" rel="external">connect(String url)</a> 方法创建一个新的 <a href="https://jsoup.org/apidocs/org/jsoup/Connection.html" target="_blank" rel="external">Connection</a>, 和 <a href="https://jsoup.org/apidocs/org/jsoup/helper/HttpConnection.html#get(" target="_blank" rel="external">get()</a> 取得和解析一个HTML文件。如果从该URL获取HTML时发生错误，便会抛出 IOException，应适当处理。<br>Connection 接口还提供一个方法链来解决特殊请求，具体如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Document doc = Jsoup.connect(<span class="string">"http://test.com"</span>).data(<span class="string">"query"</span>, <span class="string">"Java"</span>).userAgent(<span class="string">"Mozilla"</span>).cookie(<span class="string">"auth"</span>, <span class="string">"token"</span>).timeout(<span class="number">3000</span>).post();</div></pre></td></tr></table></figure>
<p>可以向链接地址post参数，设置userAgent，cookie，timeout等，而且这里是采用的链接操作很方便（熟悉jQuery的应该很熟悉这样的链接操作）。</p>
<h4 id="4-根据文件加载document"><a href="#4-根据文件加载document" class="headerlink" title="4.根据文件加载document"></a>4.根据文件加载document</h4><p>有时候我们要处理的html内容，可能是存在硬盘上的某个文件里面，我们需要从中提取或者解析某些内容出来，我们可以通过Jsoup来这样处理。示例代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">File input = <span class="keyword">new</span> File(<span class="string">"d:/input.html"</span>);</div><div class="line">Document doc = Jsoup.parse(input, <span class="string">"UTF-8"</span>, <span class="string">"http://test.com/"</span>);</div></pre></td></tr></table></figure>
<p>看到这里可能有一个疑问，第一个参数是文件，第二是编码，第三个是什么呢?第三个参数是baseUrl，使用他我们可以方便的处理相对路径问题，如果不需要可以不传，这是一个多态方法，在前面的三个部分里面，都可以再加一个这样的baseUrl，后面会详细讲述。</p>
<h3 id="三、-数据抽取"><a href="#三、-数据抽取" class="headerlink" title="三、 数据抽取"></a>三、 数据抽取</h3><h4 id="1-使用Dom方法遍历文档"><a href="#1-使用Dom方法遍历文档" class="headerlink" title="1.使用Dom方法遍历文档"></a>1.使用Dom方法遍历文档</h4><p>通过第二章我们可以获取一个document的对象，我们可以通过这个对象来遍历文档，如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Document doc = Jsoup.parse(input, <span class="string">"UTF-8"</span>, <span class="string">"http://test.com/"</span>);</div><div class="line">Element content = doc.getElementById(<span class="string">"content"</span>);</div><div class="line">Elements links = content.getElementsByTag(<span class="string">"a"</span>);</div><div class="line"><span class="keyword">for</span>(Element link : links) &#123;</div><div class="line">String linkHref = link.attr(<span class="string">"href"</span>);</div><div class="line">String linkText = link.text();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这里我们可以方便的使用Doument对象的方法来获取内容。常用方法如下：</p>
<h5 id="查找元素"><a href="#查找元素" class="headerlink" title="查找元素"></a>查找元素</h5><ul>
<li><a href="https://jsoup.org/apidocs/org/jsoup/nodes/Element.html#getElementById(java.lang.String" target="_blank" rel="external">getElementById(String id)</a></li>
<li><a href="https://jsoup.org/apidocs/org/jsoup/nodes/Element.html#getElementsByTag(java.lang.String" target="_blank" rel="external">getElementsByTag(String tag)</a></li>
<li><a href="https://jsoup.org/apidocs/org/jsoup/nodes/Element.html#getElementsByClass(java.lang.String" target="_blank" rel="external">getElementsByClass(String className)</a></li>
<li><a href="https://jsoup.org/apidocs/org/jsoup/nodes/Element.html#getElementsByAttribute(java.lang.String" target="_blank" rel="external">getElementsByAttribute(String key)</a>(and related methods)</li>
<li>Element siblings: <a href="https://jsoup.org/apidocs/org/jsoup/nodes/Element.html#siblingElements(" target="_blank" rel="external">siblingElements()</a>, <a href="https://jsoup.org/apidocs/org/jsoup/nodes/Element.html#firstElementSibling(" target="_blank" rel="external">firstElementSibling()</a>, <a href="https://jsoup.org/apidocs/org/jsoup/nodes/Element.html#lastElementSibling(" target="_blank" rel="external">lastElementSibling()</a>;<a href="https://jsoup.org/apidocs/org/jsoup/nodes/Element.html#nextElementSibling(" target="_blank" rel="external">nextElementSibling()</a>, <a href="https://jsoup.org/apidocs/org/jsoup/nodes/Element.html#previousElementSibling(" target="_blank" rel="external">previousElementSibling()</a></li>
<li>Graph: <a href="https://jsoup.org/apidocs/org/jsoup/nodes/Node.html#parent(" target="_blank" rel="external">parent()</a>, <a href="https://jsoup.org/apidocs/org/jsoup/nodes/Node.html#children(" target="_blank" rel="external">children()</a>), <a href="https://jsoup.org/apidocs/org/jsoup/nodes/Element.html#child(int" target="_blank" rel="external">child(int index)</a></li>
</ul>
<h5 id="元素数据"><a href="#元素数据" class="headerlink" title="元素数据"></a>元素数据</h5><ul>
<li><a href="https://jsoup.org/apidocs/org/jsoup/select/Elements.html#attr(java.lang.String" target="_blank" rel="external">attr(String key)</a>获取属性<a href="https://jsoup.org/apidocs/org/jsoup/select/Elements.html#attr(java.lang.String, java.lang.String" target="_blank" rel="external">attr(String key, String value)</a>设置属性</li>
<li>attributes()获取所有属性</li>
<li>id(), className() and classNames()</li>
<li>text()获取文本内容text(String value) 设置文本内容</li>
<li>html()获取元素内HTMLhtml(String value)设置元素内的HTML内容</li>
<li>outerHtml()获取元素外HTML内容</li>
<li>data()获取数据内容（例如：script和style标签)</li>
<li>tag() and tagName()</li>
</ul>
<h5 id="操作HTML和文本"><a href="#操作HTML和文本" class="headerlink" title="操作HTML和文本"></a>操作HTML和文本</h5><ul>
<li>append(String html), prepend(String html)</li>
<li>appendText(String text), prependText(String text)</li>
<li>appendElement(String tagName), prependElement(String tagName)</li>
<li>html(String value)</li>
</ul>
<h4 id="2-使用选择器来查找元素"><a href="#2-使用选择器来查找元素" class="headerlink" title="2.使用选择器来查找元素"></a>2.使用选择器来查找元素</h4><p>使用jQuery时，我们无不为其强大的选择器叹服，jsoup有同样的强大的选择器，可以方便我们的对文档进行处理。示例代码如下：<br>jsoup elements对象支持类似于CSS (或jquery)的选择器语法，来实现非常强大和灵活的查找功能。.<br>这个select 方法在Document, Element,或Elements对象中都可以使用。且是上下文相关的，因此可实现指定元素的过滤，或者链式选择访问。<br>Select方法将返回一个Elements集合，并提供一组方法来抽取和处理结果。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Elements links = doc.select(<span class="string">"a[href]"</span>); <span class="comment">//带有&lt;span style="text-decoration: underline;"&gt;href&lt;/span&gt;属性的a元素</span></div><div class="line">Elements pngs = doc.select(<span class="string">"img[src$=.png]"</span>);</div><div class="line"><span class="comment">//扩展名为.&lt;span style="text-decoration: underline;"&gt;png&lt;/span&gt;的图片</span></div><div class="line">Element masthead = doc.select(<span class="string">"div.masthead"</span>).first();</div><div class="line"><span class="comment">//class等于&lt;span style="text-decoration: underline;"&gt;masthead&lt;/span&gt;的&lt;span style="text-decoration: underline;"&gt;div&lt;/span&gt;标签</span></div><div class="line">Elements resultLinks = doc.select(<span class="string">"h3.r &gt; a"</span>); <span class="comment">//在h3元素之后的a元素</span></div></pre></td></tr></table></figure></p>
<p>jsoup elements对象支持类似于CSS (或jquery)的选择器语法，来实现非常强大和灵活的查找功能。.<br>这个select 方法在Document, Element,或Elements对象中都可以使用。且是上下文相关的，因此可实现指定元素的过滤，或者链式选择访问。<br>Select方法将返回一个Elements集合，并提供一组方法来抽取和处理结果。</p>
<h4 id="3-从元素中抽取属性和文档"><a href="#3-从元素中抽取属性和文档" class="headerlink" title="3.从元素中抽取属性和文档"></a>3.从元素中抽取属性和文档</h4><ul>
<li>使用Jsoup抽取属性，一般方法如下：</li>
<li>要取得一个属性的值，可以使用Node.attr(String key) 方法</li>
<li>对于一个元素中的文本，可以使用Element.text()方法</li>
<li>对于要取得元素或属性中的HTML内容，可以使用Element.html(), 或 Node.outerHtml()方法<br>示例如下：<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">String html = <span class="string">"&lt;p&gt;An &lt;a href='http://example.com/'&gt;&lt;b&gt;example&lt;/b&gt;&lt;/a&gt; link.&lt;/p&gt;"</span>;</div><div class="line">Document doc = Jsoup.parse(html);<span class="comment">//解析HTML字符串返回一个Document实现</span></div><div class="line">Element link = doc.select(<span class="string">"a"</span>).first();<span class="comment">//查找第一个a元素&lt;/pre&gt;</span></div><div class="line">String text = doc.body().text(); <span class="comment">// "An example link"//取得字符串中的文本</span></div><div class="line">String linkHref = link.attr(<span class="string">"href"</span>); <span class="comment">// "http://example.com/"//取得链接地址</span></div><div class="line">String linkText = link.text(); <span class="comment">// "example""//取得链接地址中的文本&lt;/pre&gt;</span></div><div class="line">String linkOuterH = link.outerHtml();</div><div class="line"><span class="comment">// "&lt;a href="http://example.com"&gt;&lt;b&gt;example&lt;/b&gt;&lt;/a&gt;"</span></div><div class="line">String linkInnerH = link.html(); <span class="comment">// "&lt;b&gt;example&lt;/b&gt;"//取得链接内的html内容</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="4-URL处理"><a href="#4-URL处理" class="headerlink" title="4.URL处理"></a>4.URL处理</h4><p>我们在处理HTML内容时，可能经常会遇到这种问题，需要将html页面里面的链接地址从相对地址转换成绝对地址，jsoup有一个方法用来解决此问题。我们前面对到的baseurl，就是用来解决此问题的。示例代码如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Document doc = Jsoup.connect(<span class="string">"http://www.baidu.com/"</span>).get();</div><div class="line">Element link = doc.select(<span class="string">"a"</span>).first();</div><div class="line">String relHref = link.attr(<span class="string">"href"</span>); <span class="comment">// == "/"</span></div><div class="line">String absHref = link.attr(<span class="string">"abs:href"</span>);</div><div class="line"><span class="comment">// "http://www.baidu.com/gaoji/preferences.html"</span></div></pre></td></tr></table></figure></p>
<p>在HTML元素中，URLs经常写成相对于文档位置的相对路径： <a href="/download">…</a>. 当你使用 Node.attr(String key) 方法来取得a元素的href属性时，它将直接返回在HTML源码中指定定的值。<br>假如你需要取得一个绝对路径，需要在属性名前加 abs: 前缀。这样就可以返回包含根路径的URL地址attr(“abs:href”)<br>因此，在解析HTML文档时，定义base URI非常重要。如果你不想使用abs: 前缀，还有一个方法能够实现同样的功能 Node.absUrl(String key)。</p>
<h3 id="数据修改"><a href="#数据修改" class="headerlink" title="数据修改"></a>数据修改</h3><h4 id="1-设置属性值"><a href="#1-设置属性值" class="headerlink" title="1.设置属性值"></a>1.设置属性值</h4><p>在处理html时，我们有时候可能需要修改里面的属性值，如图片地址、class名称等各种属性。<br>可以使用属性设置方法 Element.attr(String key, String value), 和 Elements.attr(String key, String value).<br>假如你需要修改一个元素的 class 属性，可以使用 Element.addClass(String className) 和Element.removeClass(String className) 方法。<br>Elements 提供了批量操作元素属性和class的方法，比如：要为div中的每一个a元素都添加一个rel=”nofollow”<br>可以使用如下方法：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">doc.select(<span class="string">"div.comments a"</span>).attr(<span class="string">"rel"</span>, <span class="string">"nofollow"</span>);</div></pre></td></tr></table></figure></p>
<p>这里的jsoup方法同样支持链接操作，如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">doc.select(<span class="string">"div.masthead"</span>).attr(<span class="string">"title"</span>, <span class="string">"jsoup"</span>).addClass(<span class="string">"round-box"</span>);</div></pre></td></tr></table></figure></p>
<h4 id="2-设置元素的html内容"><a href="#2-设置元素的html内容" class="headerlink" title="2.设置元素的html内容"></a>2.设置元素的html内容</h4><p>我们需要向html里面添加html片段等内容时可以如下操作：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">Element div = doc.select(<span class="string">"div"</span>).first(); <span class="comment">// &lt;div&gt;&lt;/div&gt;</span></div><div class="line">div.html(<span class="string">"&lt;p&gt;lorem ipsum&lt;/p&gt;"</span>); <span class="comment">// &lt;div&gt;&lt;p&gt;lorem ipsum&lt;/p&gt;&lt;/div&gt;</span></div><div class="line">div.prepend(<span class="string">"&lt;p&gt;First&lt;/p&gt;"</span>);<span class="comment">//在div前添加html内容</span></div><div class="line">div.append(<span class="string">"&lt;p&gt;Last&lt;/p&gt;"</span>);<span class="comment">//在div之后添加html内容</span></div><div class="line"><span class="comment">// 添完后的结果: &lt;div&gt;&lt;p&gt;First&lt;/p&gt;&lt;p&gt;lorem ipsum&lt;/p&gt;&lt;p&gt;Last&lt;/p&gt;&lt;/div&gt;</span></div><div class="line">Element span = doc.select(<span class="string">"span"</span>).first(); <span class="comment">// &lt;span&gt;One&lt;/span&gt;</span></div><div class="line">span.wrap(<span class="string">"&lt;li&gt;&lt;a href='http://example.com/'&gt;&lt;/a&gt;&lt;/li&gt;"</span>);</div><div class="line"><span class="comment">//对元素包裹一个外部HTML内容添完后的结果:</span></div><div class="line"><span class="comment">//&lt;li&gt;&lt;a href="http://example.com"&gt;&lt;span&gt;One&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;</span></div></pre></td></tr></table></figure></p>
<h4 id="3-设置元素的文本内容"><a href="#3-设置元素的文本内容" class="headerlink" title="3.设置元素的文本内容"></a>3.设置元素的文本内容</h4><p>如果我们需要修改元素内的文本内容，可以如下操作：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Element div = doc.select(<span class="string">"div"</span>).first(); <span class="comment">// &lt;div&gt;&lt;/div&gt;</span></div><div class="line">div.text(<span class="string">"five &gt; four"</span>); <span class="comment">// &lt;div&gt;five &amp;gt; four&lt;/div&gt;</span></div><div class="line">div.prepend(<span class="string">"First "</span>);</div><div class="line">div.append(<span class="string">" Last"</span>);</div><div class="line"><span class="comment">// now: &lt;div&gt;First five &amp;gt; four Last&lt;/div&gt;</span></div></pre></td></tr></table></figure></p>
<h6 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h6><p>文本设置方法与 HTML setter 方法一样：<br>Element.text(String text) 将清除一个元素中的内部HTML内容，然后提供的文本进行代替<br>Element.prepend(String first) 和 Element.append(String last) 将分别在元素的内部html前后添加文本节点。<br>对于传入的文本如果含有像 &lt;, &gt; 等这样的字符，将以文本处理，而非HTML。</p>
<p><strong><em>By Xiaolong：You have a dream,you got to protect it!</em></strong></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://rngift.com/2016/03/07/Welcome/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小龙">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/lucky.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xiaolong的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/07/Welcome/" itemprop="url">
                  Welcome To My Personal Blog
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-03-07T09:53:03+08:00">
                2016-03-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="说说感想"><a href="#说说感想" class="headerlink" title="说说感想"></a>说说感想</h2><pre><code>经过几个小时的努力，我的个人博客终于架设完了。之前一直想要有一个个人博客，可以把自己学习的资源，自己的体会分享出来。现在终于可以实现啦~~&lt;(￣︶￣)&gt;

虽然现在很多平台类似于CSDN、博客园、甚至新浪博客，都已经很普遍了，而我更期待的是有一个个人管理的博客站点，这才是最好玩的一件事情。&lt;(‵□′)/~

之前学过java想直接用javaee写一个自己的站点，但是需要涉及的技术太多，还需要云服务器来存放服务器后台文件。过程特别繁琐~~嗯，特别麻烦~~反正我是懒得再自己去写框架找界面样式来搭建我的博客(ˉ﹃ˉ)~~

现在感谢github和hexo让我有这样的机会，将博客绑定域名，实现真正意义上的绝对权限的本地管理~
</code></pre><h2 id="讲一下原理"><a href="#讲一下原理" class="headerlink" title="讲一下原理"></a>讲一下原理</h2><pre><code>这个模式类似于GitHub 提供服务器和空间。用git 配合Hexo来管理本地文档。然后通过域名解析把自己买的域名指向，gitHub提供的的ip。再由gitHub来转换该域名对应访问的站点。

优点就是：不用自己购买服务器，架设服务器。不用自己写博客后端框架，更不用写前端样式啦，都是可以直接拿模版来操作的(￣︶￣)↗ 哈哈哈哈~~。

有兴趣的小伙伴赶紧学起来~
</code></pre><p>学架设：<a href="http://blog.csdn.net/chen825919148/article/details/40508467" target="_blank" rel="external">点击这里</a></p>
<h2 id="小Tips"><a href="#小Tips" class="headerlink" title="小Tips"></a>小Tips</h2><p>如果你是一名学生开发者，推荐你看看这个：<a href="http://www.qcloud.com/event/qcloudSchool" target="_blank" rel="external">腾讯云云加校园计划</a></p>
<p>你将会获得一个免费的域名，和一个一块钱/月的云服务器。可以去做好多好玩的事情啦。</p>
<p><strong><em>By Xiaolong</em></strong></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/lucky.jpg"
               alt="小龙" />
          <p class="site-author-name" itemprop="name">小龙</p>
           
              <p class="site-description motion-element" itemprop="description">程序猿</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">10</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/xiaolongonly" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://blog.csdn.net/guoxiaolongonly" target="_blank" title="CSDN">
                  
                    <i class="fa fa-fw fa-csdn"></i>
                  
                  CSDN
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">小龙</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

</body>
</html>
